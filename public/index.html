<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.6" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.6">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.6">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.6">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.6" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.0.6',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="Protoss Oracle">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Protoss Oracle">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Protoss Oracle">






  <link rel="canonical" href="http://yoursite.com/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Protoss Oracle</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> 

<div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Protoss Oracle</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        
          
  <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archives</a>
</li>

      

      
    </ul>
  

  
    

  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/25/DOM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张博涵">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Protoss Oracle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/25/DOM/" itemprop="url">DOM</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-25T19:02:01+08:00">2018-04-25</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-DOM是什么"><a href="#1-DOM是什么" class="headerlink" title="1.DOM是什么"></a>1.DOM是什么</h1><p>Document Object Model<br>XML文档<br>把文档变成对象的一种模型</p>
<h2 id="I-DOM标准"><a href="#I-DOM标准" class="headerlink" title="I.DOM标准"></a>I.DOM标准</h2><p><code>Element</code>对象：<code>body</code> <code>head</code> <code>meta</code> <code>title</code> <code>script</code> <code>h1</code> <code>h2</code> <code>p</code>这些都是<code>Element</code>对象<br><code>Text</code>对象专门指文本：<code>span</code> 之类的<br><code>Document</code>对象：<code>html</code>因为它是用<code>Document</code>构造出来的<br><code>Comment</code>对象：注释</p>
<p>而他们原型链的顶端叫做<code>Node</code><br>就像我们熟知的<code>Object.prorotype</code></p>
<p>每一个标签都有它相应的构造函数，浏览器看到标签就用对应的构造函数给它构造出一个对应的内存中的对象。</p>
<pre><code>构造函数
</code></pre><p>页面中节点  ========&gt;  对象</p>
<h1 id="2-Node的接口"><a href="#2-Node的接口" class="headerlink" title="2.Node的接口"></a>2.Node的接口</h1><p>就像讨论Object.prototype一样<br>需要注意<code>Node</code>也是一种<code>object</code></p>
<p>因为超级多，记几个单词然后：<br><code>child</code>/<code>children</code>/<code>parent</code><br><code>node</code><br><code>first</code>/<code>last</code><br><code>next</code>/<code>previous</code><br><code>sibling</code>/<code>siblings</code><br><code>type</code><br><code>value</code>/<code>text</code>/<code>content</code><br><code>inner</code>/<code>outer</code><br><code>element</code><br>互相组合</p>
<h2 id="I-childNodes"><a href="#I-childNodes" class="headerlink" title="I.childNodes"></a>I.childNodes</h2><p>所有的子节点（不是子元素）<br>所以一旦有回车，就会得到一个text</p>
<p>所以想要所有标签请使用<code>children</code></p>
<p><code>nextSibling</code>是下一个兄弟节点（有回车也会返回text）</p>
<p><code>nextElementSibling</code>才是下一个兄弟标签（就是兼容性不好）</p>
<p>导致这一堆奇怪问题的原因:<code>DOM</code>不是设计来给<code>HTML</code>用的，是给<code>XML</code>用的，所以不是很配套。</p>
<h2 id="II-常用接口"><a href="#II-常用接口" class="headerlink" title="II.常用接口"></a>II.常用接口</h2><table>
<thead>
<tr>
<th style="text-align:center">接口</th>
<th style="text-align:center">作用</th>
<th style="text-align:center">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">childNodes</td>
<td style="text-align:center">所有子节点</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">firstChild</td>
<td style="text-align:center">第一个子节点</td>
</tr>
<tr>
<td style="text-align:center">innerText</td>
<td style="text-align:center">内容文本</td>
<td style="text-align:center">IE加的那点料，在小于等于IE11中修改<code>innerText</code>会移除当前元素的子节点，且永久性破坏所有后代文本节点</td>
</tr>
<tr>
<td style="text-align:center">lastChild</td>
<td style="text-align:center">最后一个子节点</td>
</tr>
<tr>
<td style="text-align:center">nextSibling</td>
<td style="text-align:center">下一个节点</td>
</tr>
<tr>
<td style="text-align:center">nodeName</td>
<td style="text-align:center">节点名称</td>
<td style="text-align:center">（获取的是大写除了svg）</td>
</tr>
<tr>
<td style="text-align:center">nodeType</td>
<td style="text-align:center">节点类型</td>
<td style="text-align:center">1:element 3:text 8:comment 9:document 10:DOCTYPE 11:DocumentFragment</td>
</tr>
<tr>
<td style="text-align:center">nodeValue</td>
<td style="text-align:center">value是一个包含当前节点的值的字符串（如果有的话）。</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">outerText</td>
<td style="text-align:center">是一个非标准的属性。作为一个获得器，它返回与Node.innerText一致的值</td>
<td style="text-align:center">作为一个设置器，它将删除当前节点并将其替换为给定的文本。</td>
</tr>
<tr>
<td style="text-align:center">ownerDocument</td>
<td style="text-align:center">会返回当前节点的顶层的 document 对象</td>
<td style="text-align:center">返回祖先</td>
</tr>
<tr>
<td style="text-align:center">parentElement</td>
<td style="text-align:center">父级元素</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">parentNode</td>
<td style="text-align:center">父级节点</td>
<td style="text-align:center">和上面那位作用不一样吗？</td>
</tr>
<tr>
<td style="text-align:center">previousSibling</td>
<td style="text-align:center">上一个兄弟节点</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">textContent</td>
<td style="text-align:center">内容文本</td>
<td style="text-align:center">FF和Opera加的那点料,会获取所有元素内容，包括<code>&lt;script&gt;</code>和<code>&lt;style&gt;</code></td>
</tr>
</tbody>
</table>
<h1 id="3-方法"><a href="#3-方法" class="headerlink" title="3.方法"></a>3.方法</h1><table>
<thead>
<tr>
<th style="text-align:center">方法</th>
<th style="text-align:center">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">appendChild()</td>
<td style="text-align:center">将一个节点添加到指定父节点的子节点列表末尾。</td>
</tr>
<tr>
<td style="text-align:center">cloneNode()</td>
<td style="text-align:center">拷贝节点，可选深拷贝或浅拷贝</td>
</tr>
<tr>
<td style="text-align:center">contains()</td>
<td style="text-align:center">判断传入的节点是否为该节点的后代节点。</td>
</tr>
<tr>
<td style="text-align:center">hasChildNodes()</td>
<td style="text-align:center">一个元素是否有子节点</td>
</tr>
<tr>
<td style="text-align:center">insertBefore()</td>
<td style="text-align:center">把一个东西插入一个东西的前面</td>
</tr>
<tr>
<td style="text-align:center">isEqualNode()</td>
<td style="text-align:center">两个节点是否相等</td>
</tr>
<tr>
<td style="text-align:center">isSameNode()</td>
<td style="text-align:center">两个节点是否是同一个节点<code>===</code></td>
</tr>
<tr>
<td style="text-align:center">removeChild()</td>
<td style="text-align:center">（从页面）干掉辣个子节点（但是他还在内存里）</td>
</tr>
<tr>
<td style="text-align:center">replaceChild()</td>
<td style="text-align:center">替换子节点 （被替换的还在内存里）</td>
</tr>
<tr>
<td style="text-align:center">normalize()</td>
<td style="text-align:center">常规化</td>
</tr>
</tbody>
</table>
<h2 id="I-cloneNode"><a href="#I-cloneNode" class="headerlink" title="I.cloneNode()"></a>I.cloneNode()</h2><p><code>var dupNode = node.cloneNode(deep)</code></p>
<p>deep是可选参数，是否采用深拷贝。如果为true，则该节点的所有后代节点也都会被克隆，如果为false，则只克隆该节点本身</p>
<h3 id="深拷贝和浅拷贝"><a href="#深拷贝和浅拷贝" class="headerlink" title="深拷贝和浅拷贝"></a>深拷贝和浅拷贝</h3><p>深拷贝和浅拷贝只针对Object，Array这种复杂类型<br>简单来说，浅复制只复制一层对象的属性，而深复制则递归复制了所有层级。</p>
<h2 id="II-normalize"><a href="#II-normalize" class="headerlink" title="II.normalize()"></a>II.normalize()</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> wrapper = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line"></span><br><span class="line">wrapper.appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">"part 1"</span>)); <span class="comment">//俩都是文本</span></span><br><span class="line">wrapper.appentChild(<span class="built_in">document</span>.createTextNode(<span class="string">"part 2"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//这时候 wrapper.childNodes.length === 2</span></span><br><span class="line"><span class="comment">//wrapper.childNodes[0].textContent === "part 1"</span></span><br><span class="line"><span class="comment">//wrapper.childNodes[1].textContent === "part 2"</span></span><br><span class="line"></span><br><span class="line">wrapper.normalize();</span><br><span class="line"></span><br><span class="line"><span class="comment">//常规化以后 wrapper.childNodes.length === 1</span></span><br><span class="line">wrapper.childNodes[<span class="number">0</span>].textContent === <span class="string">"Part 1 Part 2"</span></span><br></pre></td></tr></table></figure>
<p>使这个 拆成两部分的文本合在一起了。（把不合常规的常规化）</p>
<h2 id="III-学习方法"><a href="#III-学习方法" class="headerlink" title="III.学习方法"></a>III.学习方法</h2><p>1.他写的什么就是什么意思，看懂单词就明白它是干嘛的了<br>2.看懂单词还是不知道怎么用？查MDN吧…</p>
<p>把该记的特殊的记住就可以了。</p>
<h1 id="4-Document接口"><a href="#4-Document接口" class="headerlink" title="4.Document接口"></a>4.Document接口</h1><table>
<thead>
<tr>
<th style="text-align:center">接口</th>
<th style="text-align:center">作用</th>
<th style="text-align:center">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">anchors</td>
<td style="text-align:center">获取页面<code>&lt;a&gt;</code>标签</td>
<td style="text-align:center"><code>H5已弃用</code>。由于向后兼容的原因，该属性只返回那些拥有<code>name</code>属性的<code>a</code>元素，而不是拥有<code>id</code>属性的<code>a</code>元素</td>
</tr>
<tr>
<td style="text-align:center">body</td>
<td style="text-align:center">获取<code>&lt;body&gt;</code>元素</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">characterSet</td>
<td style="text-align:center">就是<code>char</code>（字符）字符编码</td>
<td style="text-align:center"><code>document.characterSet</code>看它的字符编码是什么</td>
</tr>
<tr>
<td style="text-align:center">childElementCount</td>
<td style="text-align:center">返回一个无符号长整型数字，表示给定元素的子元素数</td>
</tr>
<tr>
<td style="text-align:center">children</td>
<td style="text-align:center">获取子元素咯</td>
<td style="text-align:center"><code>document</code>是<code>html</code>的父级哟，但<code>html</code>还是根元素</td>
</tr>
<tr>
<td style="text-align:center">doctype</td>
<td style="text-align:center">就是<code>!DOCTYPE</code>协议咯</td>
</tr>
<tr>
<td style="text-align:center">documentElement</td>
<td style="text-align:center">返回文档对象的根元素</td>
<td style="text-align:center"><code>HTML</code>文档的<html>元素</html></td>
</tr>
<tr>
<td style="text-align:center">domain</td>
<td style="text-align:center">域名</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">fullscreen</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">head</td>
<td style="text-align:center">头部</td>
</tr>
<tr>
<td style="text-align:center">hidden</td>
<td style="text-align:center">是否被隐藏？</td>
<td style="text-align:center">返回布尔值</td>
</tr>
<tr>
<td style="text-align:center">images</td>
<td style="text-align:center">获取页面中所有<code>&lt;img&gt;</code>标签</td>
</tr>
<tr>
<td style="text-align:center">links</td>
<td style="text-align:center">获取页面中所有<code>&lt;a&gt;</code>标签</td>
</tr>
<tr>
<td style="text-align:center">location</td>
<td style="text-align:center">返回一个 Location 对象</td>
<td style="text-align:center">包含有文档的 URL 相关的信息，并提供了改变该 URL 和加载其他 URL 的方法。</td>
</tr>
<tr>
<td style="text-align:center">onxxxxxxxx</td>
<td style="text-align:center">当xxx时的事件监听</td>
<td style="text-align:center"><code>onclick</code> <code>onmousemove</code> <code>onmousedown</code> 之类的</td>
</tr>
<tr>
<td style="text-align:center">origin</td>
<td style="text-align:center">源</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">plugins</td>
<td style="text-align:center">检测用户有没有开启插件</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">readyState</td>
<td style="text-align:center">检测用户是否是否下载完毕</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">referrer</td>
<td style="text-align:center">引荐者</td>
<td style="text-align:center">发请求的时候，浏览器要告诉服务器，它是通过什么渠道进来的。服务器可以通过<code>referrer</code>来拒绝为其他网站提供服务</td>
</tr>
<tr>
<td style="text-align:center">scripts</td>
<td style="text-align:center">获取所有<code>script</code>标签</td>
</tr>
<tr>
<td style="text-align:center">scrollingElement</td>
<td style="text-align:center">正在滚动的元素</td>
</tr>
<tr>
<td style="text-align:center">styleSheets</td>
<td style="text-align:center">获取所有CSS</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">title</td>
<td style="text-align:center">获取所有<code>&lt;title&gt;</code></td>
</tr>
<tr>
<td style="text-align:center">visibilityState</td>
<td style="text-align:center">获取页面是否被显示（当前标签是否被激活）</td>
<td style="text-align:center">返回布尔值</td>
</tr>
</tbody>
</table>
<h2 id="I-方法"><a href="#I-方法" class="headerlink" title="I.方法"></a>I.方法</h2><table>
<thead>
<tr>
<th style="text-align:center">方法</th>
<th style="text-align:center">作用</th>
<th style="text-align:center">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">close()</td>
<td style="text-align:center">关闭文档</td>
<td style="text-align:center">关闭向当前文档的数据写入，想要打开要使用document.open()</td>
</tr>
<tr>
<td style="text-align:center">createDocumentFragment()</td>
<td style="text-align:center">创建一个DocumentFragment</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">createElement()</td>
<td style="text-align:center">创建由tagName 指定的HTML元素</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">createTextNode()</td>
<td style="text-align:center">创建一个文本节点</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">execCommand()</td>
<td style="text-align:center">执行一个命令</td>
<td style="text-align:center">允许命令操纵可编辑区域的内容，主要用于富文本编辑器，相关内容查mdn</td>
</tr>
<tr>
<td style="text-align:center">exitFullscreen()</td>
<td style="text-align:center">退出全屏</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">getElementById()</td>
<td style="text-align:center">通过<code>id</code>获取元素</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">getElementsByClassName()</td>
<td style="text-align:center">通过<code>class</code>名获取元素</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">getElementsByName()</td>
<td style="text-align:center">通过<code>name</code>属性获取元素</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">getElementsByTagName</td>
<td style="text-align:center">通过<code>标签名</code>获取元素</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">getSelection()</td>
<td style="text-align:center">获取用户选中的文本</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">hasFocus()</td>
<td style="text-align:center">用户是否<code>focus</code>到当前页面</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">open()</td>
<td style="text-align:center">和<code>close</code>对应</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">querySelector()</td>
<td style="text-align:center">通过<code>选择器（css）</code>获取元素</td>
<td style="text-align:center">抄jQuery的</td>
</tr>
<tr>
<td style="text-align:center">querySelectorALL()</td>
<td style="text-align:center">通过<code>选择器（css）</code>获取元素（返回所有元素）</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">registerElement()</td>
<td style="text-align:center">在浏览器注册一个新的 自定义元素 ，返回一个该元素的构造函数。</td>
<td style="text-align:center">用的并不多…建议使用：customElements.define（）</td>
</tr>
<tr>
<td style="text-align:center">write()</td>
<td style="text-align:center">写文本</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">writeln()</td>
<td style="text-align:center">写一行文本</td>
</tr>
</tbody>
</table>
<h3 id="i-close"><a href="#i-close" class="headerlink" title="i.close()"></a>i.close()</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">hello</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        documetn.write(1)</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.write(<span class="number">2</span>)</span></span><br><span class="line"><span class="javascript">        setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.write(<span class="number">3</span>)</span></span><br><span class="line"><span class="undefined">        &#125;,3000)</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>document =&gt; open =&gt; write =&gt; close =&gt; open</code></p>
<p>每次在<code>script</code>执行完以后页面会关闭，如果有延时性的<code>write</code>，就会把页面冲掉<br>上面代码块中首先有<code>hello</code>和<code>1</code> <code>2</code>这时候文档close<br>但是文档<code>close</code>了之后写了<code>3</code><br>所以就会把页面冲掉</p>
<p>所以在写write的时候要谨慎设置延时和异步 </p>
<h1 id="5-Element接口"><a href="#5-Element接口" class="headerlink" title="5.Element接口"></a>5.Element接口</h1><p>最熟悉的<code>classList.add()</code><br>而且<code>Element</code>也可以<code>querySelector()</code>的<br>可以<code>div.querySelector()</code></p>
<h3 id="i-innerHTML和innerText"><a href="#i-innerHTML和innerText" class="headerlink" title="i.innerHTML和innerText"></a>i.innerHTML和innerText</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;<span class="selector-tag">input</span> type=<span class="string">"text"</span> id=<span class="string">"input1"</span>&gt; &lt;<span class="selector-tag">button</span> id=x&gt;写入页面&lt;/button&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> id=<span class="string">"output"</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">x<span class="selector-class">.onclick</span> = function()&#123;</span><br><span class="line">    output<span class="selector-class">.innerHTML</span> = input1.value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*x.onclick = function()&#123;</span></span><br><span class="line"><span class="comment">    output.innerText = input1.value</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br></pre></td></tr></table></figure>
<p>innerHTML可以识别写入页面的代码<code>&lt;b&gt;&lt;/b&gt;</code>就会加粗<code>&lt;i&gt;&lt;/i&gt;</code>就会变斜<br><code>&lt;script&gt;&lt;/script&gt;</code>怎么搞<br>那麻烦了，用户真拿这个输入框把<code>cookie</code>爬了怎么办。<br>所以还是很危险的<br>他会把用户写的标签，真的当做开发者写的。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/23/JavaScript-函数/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张博涵">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Protoss Oracle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/23/JavaScript-函数/" itemprop="url">JavaScript-函数</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-23T03:48:49+08:00">2018-04-23</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>函数就是一段可以反复调用的代码块。</p>
<h1 id="1-函数的五种声明方式："><a href="#1-函数的五种声明方式：" class="headerlink" title="1.函数的五种声明方式："></a>1.函数的五种声明方式：</h1><h2 id="I-具名函数"><a href="#I-具名函数" class="headerlink" title="I.具名函数"></a>I.具名函数</h2><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title">f</span>(x,y)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">x+y</span></span><br><span class="line">&#125;</span><br><span class="line">f.name // <span class="string">'f'</span></span><br></pre></td></tr></table></figure>
<p>.name就是函数名</p>
<h2 id="II-匿名函数"><a href="#II-匿名函数" class="headerlink" title="II.匿名函数"></a>II.匿名函数</h2><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f</span><br><span class="line">f = <span class="function"><span class="keyword">function</span><span class="params">(x,y)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x+y</span><br><span class="line">&#125;</span><br><span class="line">f.name <span class="comment">//'f'</span></span><br></pre></td></tr></table></figure>
<p>.name就是变量名</p>
<p>如果要声明匿名函数，必须把它给一个变量</p>
<h2 id="III-具名函数赋值"><a href="#III-具名函数赋值" class="headerlink" title="III.具名函数赋值"></a>III.具名函数赋值</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f</span><br><span class="line">f = <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params">x,y</span>)</span>&#123; <span class="keyword">return</span> x+y &#125;</span><br><span class="line">f.name <span class="comment">// 'f2'</span></span><br><span class="line"><span class="built_in">console</span>.log(f2) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<p>.name随具名函数的函数名</p>
<p>和具名函数的区别： <code>f.name</code>是他相应具名函数的名字。<br><code>console.log(f)</code>的时候，会报错,因为js会找不到<code>f2</code><br>就很蠢：<strong>这就是它的不一致性</strong><br>这是个作用域问题：<br><code>function f2(){}</code>中的<code>f2</code>只能作用于花括号内</p>
<h2 id="IV-window-Function"><a href="#IV-window-Function" class="headerlink" title="IV.window.Function"></a>IV.window.Function</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> f = new Function(<span class="string">'x'</span>,<span class="string">'y'</span>,<span class="string">'return x+y'</span>)</span><br><span class="line">f<span class="selector-class">.name</span> <span class="comment">// anonymous</span></span><br></pre></td></tr></table></figure>
<p>.name 是<code>anonymous</code> 他他娘的是匿名的，名字叫<code>匿名的</code></p>
<p>很不常用<br>所有的部分用字符串表示，字符串可以拼起来，也可以在里面加变量。</p>
<h2 id="V-箭头函数"><a href="#V-箭头函数" class="headerlink" title="V.箭头函数"></a>V.箭头函数</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="function">(<span class="params">x,y</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="keyword">return</span> x+y</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">var</span> sum = <span class="function">(<span class="params">x,y</span>) =&gt;</span> x+y</span><br><span class="line"> <span class="keyword">var</span> n2 = <span class="function"><span class="params">n</span> =&gt;</span> n*n</span><br></pre></td></tr></table></figure>
<p>.name 是变量名</p>
<p><strong>只有一个参数</strong>，不需要圆括号<br>如果<strong>只有一句话</strong>，不需要花括号也不需要return(也不能返回对象)<br><strong>多句话</strong>的时候，用<strong>分号</strong>隔开</p>
<p>箭头函数是匿名的（没看到地方写名字呀）</p>
<h1 id="2-调用函数"><a href="#2-调用函数" class="headerlink" title="2.调用函数"></a>2.调用函数</h1><p>调用： call</p>
<h2 id="I-函数是如何储存在内存里的"><a href="#I-函数是如何储存在内存里的" class="headerlink" title="I.函数是如何储存在内存里的"></a>I.函数是如何储存在内存里的</h2><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Function(<span class="string">'x'</span>,<span class="string">'y'</span>,<span class="string">'return x+y'</span>)  <span class="comment">//这时候栈里面存了地址ADDR</span></span><br><span class="line"><span class="comment">//堆里存了函数的内容：</span></span><br><span class="line"><span class="string">name:</span>   <span class="comment">//名字，他叫匿名的</span></span><br><span class="line"><span class="string">params:</span> [<span class="string">'x'</span>,<span class="string">'y'</span>]   <span class="comment">//参数</span></span><br><span class="line"><span class="string">fbody:</span> <span class="string">'return x+y'</span>     <span class="comment">//函数体</span></span><br><span class="line"><span class="string">__proto__:</span>指向函数，里面有个call</span><br></pre></td></tr></table></figure>
<p><code>eval：把字符串当代码执行</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">f.call = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">window</span>.evaleval（f.functionBody）</span><br><span class="line">&#125;</span><br><span class="line">f()&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">window</span>.eval(f.functionBody)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以理解为：f指的是这个对象<br>f.call()指的是执行这个对象的函数体</p>
<p><strong>可以执行代码的对象被叫做函数</strong></p>
<h2 id="II-f-1-2-和f-call-undefined-1-2"><a href="#II-f-1-2-和f-call-undefined-1-2" class="headerlink" title="II.f(1,2)和f.call(undefined,1,2)"></a>II.f(1,2)和f.call(undefined,1,2)</h2><p>f.call()才是硬核（hardcore）调用<br>贴心的f()语法糖</p>
<p>不吃糖的选手一定喜欢玩黑魂<br>不吃糖才能更加从容的了解this</p>
<h2 id="III-如何使用call"><a href="#III-如何使用call" class="headerlink" title="III.如何使用call"></a>III.如何使用call</h2><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">(x,y)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x+y</span><br><span class="line">&#125;</span><br><span class="line">f.call(<span class="literal">undefined</span>,<span class="number">1</span>,<span class="number">2</span>)   <span class="comment">//3</span></span><br><span class="line"><span class="comment">//第一个参数写undefined，从第二个参数开始传</span></span><br></pre></td></tr></table></figure>
<h1 id="3-this-arguments"><a href="#3-this-arguments" class="headerlink" title="3.this? arguments?"></a>3.this? arguments?</h1><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f.call(undefined,<span class="number">1</span>,<span class="number">2</span>) <span class="comment">//3</span></span><br><span class="line"><span class="comment">//这时候好玩了，第一个参数就是this</span></span><br><span class="line"><span class="comment">//第二第三个参数就是arguments</span></span><br></pre></td></tr></table></figure>
<h2 id="I-规律"><a href="#I-规律" class="headerlink" title="I.规律"></a>I.规律</h2><p>1.call的第一个参数可以用this得到<br>2.call的后面的参数可以用arguments得到</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>)</span><br><span class="line">&#125;</span><br><span class="line">f.call(<span class="literal">undefined</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>arguments会打出参数（除了第一个）组成<strong>伪数组</strong><br><strong>普通模式下：</strong><br>如果this是undefined，浏览器会自动把this变成window(潜规则)<br><strong>严格模式下：</strong><br>this是什么他就打什么。</p>
<p><strong>所以，this就是call的第一个参数</strong></p>
<p>为何JS一定要this，一定要new。因为：<strong>要长得像JAVA</strong></p>
<h1 id="4-call-stack"><a href="#4-call-stack" class="headerlink" title="4. call stack"></a>4. call stack</h1><h2 id="I-调用队栈"><a href="#I-调用队栈" class="headerlink" title="I.调用队栈"></a>I.调用队栈</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'a'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'a'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'b'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'b'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'c'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'c'</span></span><br><span class="line">&#125;</span><br><span class="line">a.call()</span><br><span class="line">b.call()</span><br><span class="line">c.call()</span><br></pre></td></tr></table></figure>
<p>先进后出：<br>先a.call()再console.log(‘a’)<br>然后console.log(‘a’)抹<br>a.call()最后被抹掉</p>
<p><strong>先进入call stack的后出去</strong></p>
<h2 id="II-递归"><a href="#II-递归" class="headerlink" title="II.递归"></a>II.递归</h2><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span></span> <span class="built_in">sum</span>(n)&#123;</span><br><span class="line">    <span class="keyword">if</span>(n =+ <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> n + <span class="built_in">sum</span>.<span class="keyword">call</span>(undefined, n-<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">sum</span>.<span class="keyword">call</span>(undefined, <span class="number">5</span>)  //<span class="number">5</span> + <span class="built_in">sum</span>(<span class="number">4</span>)</span><br><span class="line">//<span class="built_in">sum</span>(<span class="number">10</span>)  //<span class="number">10</span> + <span class="built_in">sum</span>(<span class="number">9</span>)</span><br><span class="line">//<span class="built_in">sum</span>(<span class="number">4</span>)  //<span class="number">4</span> + <span class="built_in">sum</span>(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>求sum(5)的时候发现要找sum(4)<br>求sum(4)的时候发现要求sum(3)<br>…<br>一路找到sum(1)<br>之后一个一个抹掉，出来到sum(5)</p>
<h2 id="III-什么叫Stack-Overflow"><a href="#III-什么叫Stack-Overflow" class="headerlink" title="III.什么叫Stack Overflow"></a>III.什么叫Stack Overflow</h2><p>栈溢出</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span></span> <span class="built_in">sum</span>(n)&#123;</span><br><span class="line">    <span class="keyword">if</span>(n =+ <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> n + <span class="built_in">sum</span>.<span class="keyword">call</span>(undefined, n-<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">sum</span>.<span class="keyword">call</span>(undefined, <span class="number">1000000</span>)</span><br></pre></td></tr></table></figure>
<p>如果栈的长度没有1000000就会爆栈</p>
<p>chrome里压stack是有上限的</p>
<p>同时Stack Overflow是个网站，专门讨论bug的</p>
<h1 id="5-作用域（scope）"><a href="#5-作用域（scope）" class="headerlink" title="5.作用域（scope）"></a>5.作用域（scope）</h1><h2 id="I-tree"><a href="#I-tree" class="headerlink" title="I.tree"></a>I.tree</h2><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var <span class="keyword">a</span> = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>()&#123;</span></span><br><span class="line">    var <span class="keyword">a</span> = <span class="number">2</span></span><br><span class="line">    f2.call()</span><br><span class="line">    console.<span class="built_in">log</span>(<span class="keyword">a</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f2</span>()&#123;</span></span><br><span class="line">        var <span class="keyword">a</span> = <span class="number">3</span></span><br><span class="line">        console.<span class="built_in">log</span>(<span class="keyword">a</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f1.call()</span><br><span class="line">console.<span class="built_in">log</span>(<span class="keyword">a</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">           全局作用域（window/<span class="built_in">global</span>）</span><br><span class="line">                       |</span><br><span class="line">   f1的作用域                         变量<span class="keyword">a</span></span><br><span class="line">       |</span><br><span class="line">变量<span class="keyword">a</span>      f2的作用域</span><br><span class="line">              |</span><br><span class="line">            变量<span class="keyword">a</span></span><br></pre></td></tr></table></figure>
<p>如果把<code>var a = 2</code>改成<code>a = 2</code>JS会优先认为这是个赋值<br>JS会在上一级作用域找，找到了就用这个a—— <strong>就近原则</strong><br>什么时候<code>a = 2</code>算声明全局？<br>在找到最后也没找到<code>a</code>的时候</p>
<h2 id="II-声明提升"><a href="#II-声明提升" class="headerlink" title="II.声明提升"></a>II.声明提升</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                    <span class="comment">//var a 应该在这里</span></span><br><span class="line">    f2.call()   </span><br><span class="line">    <span class="built_in">console</span>.log(a)</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">2</span>           <span class="comment">//变量提升： 先把它拆开看 var a 和 a = 2。 a = 2在这里</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>)</span>&#123;  <span class="comment">//这里也有</span></span><br><span class="line">        <span class="keyword">var</span> a = <span class="number">3</span>       <span class="comment">//这里也有</span></span><br><span class="line">        <span class="built_in">console</span>.log(a)  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f1.call()</span><br><span class="line"><span class="built_in">console</span>.log(a)</span><br></pre></td></tr></table></figure>
<p>拿到代码先提升<strong>声明</strong>部分<br>声明部分声明部分声明部分<br>改装完毕后它是这样的：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">a</span> = <span class="number">1</span></span><br><span class="line">function f1()&#123;</span><br><span class="line">    <span class="selector-tag">var</span> <span class="selector-tag">a</span>               <span class="comment">//提升声明</span></span><br><span class="line">    function f2()&#123;          <span class="comment">//函数声明就不是声明了吗？也要提升</span></span><br><span class="line">        <span class="selector-tag">var</span> <span class="selector-tag">a</span>           <span class="comment">//提升声明</span></span><br><span class="line">        <span class="selector-tag">a</span> = <span class="number">3</span></span><br><span class="line">        console.log(a)</span><br><span class="line">    &#125;</span><br><span class="line">    f2.call()</span><br><span class="line">    console.log(a)</span><br><span class="line">    <span class="selector-tag">a</span> = <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line">f1.call()</span><br><span class="line">console.log(a)</span><br></pre></td></tr></table></figure>
<p>所以调用f1以后<code>a</code>是什么？<br>赋值在console.log后面，f2的作用域又碰不到<br>那只有undefined咯</p>
<p>作用域仅代表变量<strong>是哪个</strong><br>不表达变量的<strong>值</strong></p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;<span class="built_in">li</span>&gt;选项<span class="number">1</span>&lt;/<span class="built_in">li</span>&gt;</span><br><span class="line">    &lt;<span class="built_in">li</span>&gt;选项<span class="number">2</span>&lt;/<span class="built_in">li</span>&gt;</span><br><span class="line">    &lt;<span class="built_in">li</span>&gt;选项<span class="number">3</span>&lt;/<span class="built_in">li</span>&gt;</span><br><span class="line">    &lt;<span class="built_in">li</span>&gt;选项<span class="number">4</span>&lt;/<span class="built_in">li</span>&gt;</span><br><span class="line">    &lt;<span class="built_in">li</span>&gt;选项<span class="number">5</span>&lt;/<span class="built_in">li</span>&gt;</span><br><span class="line">    &lt;<span class="built_in">li</span>&gt;选项<span class="number">6</span>&lt;/<span class="built_in">li</span>&gt;    </span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">var</span> liTags = document.querySelectorAll('<span class="built_in">li</span>')</span><br><span class="line"><span class="keyword">for</span>(<span class="built_in">var</span> i=<span class="number">0</span>; i&lt;liTags.<span class="built_in">length</span>; i++)&#123;</span><br><span class="line">    </span><br><span class="line">    liTags[i].onclick = function()&#123;</span><br><span class="line">        console.<span class="built_in">log</span>(i)  //这个i是多少</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.<span class="built_in">log</span>(i)</span><br></pre></td></tr></table></figure>
<p>i还是那个i</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> liTags</span><br><span class="line"><span class="selector-tag">var</span> i</span><br><span class="line">liTags = document.querySelectorAll(<span class="string">'li'</span>)</span><br><span class="line"><span class="function"><span class="title">for</span><span class="params">(var i=<span class="number">0</span>; i&lt;liTags.length; i++)</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    liTags[i]<span class="selector-class">.onclick</span> = function()&#123;</span><br><span class="line">        console.log(i)  <span class="comment">//这个i是多少</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(i)</span><br></pre></td></tr></table></figure>
<p>遍历之后才是点击，结果是6</p>
<p><strong>只要它不是当场执行，都有可能变。</strong></p>
<h1 id="6-闭包（Closure）"><a href="#6-闭包（Closure）" class="headerlink" title="6.闭包（Closure）"></a>6.闭包（Closure）</h1><p>如果一个函数，使用了它范围外的变量，那么这个（函数+这个变量）就叫做闭包。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/23/JavaScript-数组/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张博涵">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Protoss Oracle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/23/JavaScript-数组/" itemprop="url">JavaScript-数组</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-23T03:44:38+08:00">2018-04-23</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-标准库"><a href="#1-标准库" class="headerlink" title="1.标准库"></a>1.标准库</h1><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">Object</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">String</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">Number</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">Array</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">Boolean</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">Function</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<p>这些东西。</p>
<h1 id="2-new"><a href="#2-new" class="headerlink" title="2.new"></a>2.new</h1><p>除了<code>Object</code><br>其他类型加上<code>new</code><br>都会变成对应的对象（<code>复杂类型</code>）。</p>
<p>不加new返回的是<code>基本类型</code></p>
<h1 id="3-Array"><a href="#3-Array" class="headerlink" title="3.Array"></a>3.Array</h1><p><code>人类</code>：数组就是数据的有序集合<br><code>JS</code>：数据就是原型链中有 Array.prototype 的对象(用Array构造出来的对象)</p>
<h2 id="I-他的一些属性"><a href="#I-他的一些属性" class="headerlink" title="I.他的一些属性"></a>I.他的一些属性</h2><h3 id="new"><a href="#new" class="headerlink" title="new"></a>new</h3><p>因为它是对象，所以加不加<code>new</code>都一样。</p>
<h3 id="它存在不一致性"><a href="#它存在不一致性" class="headerlink" title="它存在不一致性"></a>它存在不一致性</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">a</span> = Array(<span class="number">3</span>)    <span class="comment">//length = 3</span></span><br><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">a</span> = Array(<span class="number">3</span>,<span class="number">3</span>)      <span class="comment">//0:3,1:3,length: 2</span></span><br></pre></td></tr></table></figure>
<p>是不是很坑，它传一个参数和传两个参数的功能是不一样的<br>传一个参数的时候仅代表它的长度。</p>
<h2 id="II-伪数组"><a href="#II-伪数组" class="headerlink" title="II.伪数组"></a>II.伪数组</h2><p>原型链中没有Array.prototype</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"><span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.dir(<span class="built_in">arguments</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//argument就是一个伪数组    长得像数组，但是__proto__直接指向Object.Prototype</span></span><br></pre></td></tr></table></figure>
<h2 id="III-API"><a href="#III-API" class="headerlink" title="III.API"></a>III.API</h2><h3 id="i-forEach"><a href="#i-forEach" class="headerlink" title="i..forEach()"></a>i..forEach()</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>]</span><br><span class="line">a.forEach( <span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;        <span class="comment">//接受参数是一个函数</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'value'</span>, x)     <span class="comment">//函数必定有两个参数</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'key'</span>, y)        </span><br><span class="line">&#125; )</span><br></pre></td></tr></table></figure>
<p>在写出<code>a.forEach</code>的时候，<code>a</code>这个数组已经被当做参数传进去了（想象成<code>this</code>）</p>
<h3 id="ii-sort"><a href="#ii-sort" class="headerlink" title="ii..sort"></a>ii..sort</h3><p>排序用的，一般内置的排序是快排<br>但是如何让JS知道你要<code>顺序</code>还是<code>倒序</code>呢？</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">4</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">43</span>,<span class="number">5</span>]</span><br><span class="line">a.sort(function(x,y)&#123;       <span class="comment">//传入一个函数，函数必须有两个参数</span></span><br><span class="line">    return x-y            <span class="comment">//返回值必须是0 正数 负数</span></span><br><span class="line">&#125; )                         <span class="comment">//0表示相等，位置相同 正数表示前一个大，放后面 负数表示前一个放前面。</span></span><br></pre></td></tr></table></figure>
<p>这里可以得出，改变顺序和倒序只需要改变<code>return</code>后面的<code>x-y</code>或<code>y-x</code>就可以了<br>所以排完以后不是你想要的时候<strong>换一下就行了</strong></p>
<h3 id="iii-join"><a href="#iii-join" class="headerlink" title="iii..join"></a>iii..join</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span> = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="selector-tag">a</span>.join(<span class="string">'逗号'</span>)   <span class="comment">//"1逗号2逗号3"</span></span><br><span class="line"><span class="selector-tag">a</span>.join(<span class="string">','</span>)         <span class="comment">//"1,2,3"</span></span><br></pre></td></tr></table></figure>
<p>干吗用的，加我一个用的。</p>
<h3 id="iv-concat"><a href="#iv-concat" class="headerlink" title="iv..concat"></a>iv..concat</h3><p>干嘛用的？<br>连起来用的</p>
<p><strong>一般用法：</strong></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">a</span> = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">b</span> = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="selector-tag">var</span> c = <span class="selector-tag">a</span>.concat(b)      <span class="comment">//c = [1,2,3,4,5,6]</span></span><br></pre></td></tr></table></figure>
<p>用来连接数组</p>
<p><strong>特殊用法：</strong></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">a</span> = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">b</span> = <span class="selector-tag">a</span>.concat([])    <span class="comment">//b = [1,2,3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//这时候 a === b   //false</span></span><br><span class="line">    <span class="comment">//所以这是一种复制数组的方法</span></span><br><span class="line"><span class="comment">//b是一个和a数组内容相同的不同数组（ADDR不一样）</span></span><br></pre></td></tr></table></figure>
<p>用来复制数组。</p>
<h3 id="v-map"><a href="#v-map" class="headerlink" title="v..map"></a>v..map</h3><p>和<code>forEach</code>几乎一样<br>区别在于<code>.map</code>有返回值<br><code>forEach</code>返回<code>undefined</code></p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var <span class="keyword">a</span> = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">a</span>.map(<span class="function"><span class="keyword">function</span>(<span class="title">value</span>,<span class="title">key</span>)&#123;</span></span><br><span class="line">    <span class="literal">return</span> <span class="built_in">value</span> * <span class="number">2</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//[<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>]</span><br><span class="line">   <span class="comment"> //也可以这么写，好看一点：</span></span><br><span class="line"><span class="keyword">a</span>.map(<span class="built_in">value</span> =&gt; <span class="built_in">value</span> * <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p><strong>映射</strong><br>一波操作以后，<code>a</code>还是没有变化<br><strong>return</strong><br>想return什么就return什么<br>对象什么的都可以。</p>
<h3 id="vi-filter"><a href="#vi-filter" class="headerlink" title="vi..filter"></a>vi..filter</h3><p><strong>过滤</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>]</span><br><span class="line">a.filter(function(value, <span class="type">key</span>)&#123;</span><br><span class="line">    return value &gt;= <span class="number">5</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//[5, 6, 7, 8, 9, 10]</span></span><br></pre></td></tr></table></figure>
<p><strong>拿来判断奇偶也可以</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>]</span><br><span class="line">a.filter(function(value, <span class="type">key</span>)&#123;      </span><br><span class="line">    return value % <span class="number">2</span> === <span class="number">0</span>      <span class="comment">//能被2整除的数</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//[2, 4, 6, 8, 10]</span></span><br></pre></td></tr></table></figure>
<h3 id="vii-reduce"><a href="#vii-reduce" class="headerlink" title="vii..reduce"></a>vii..reduce</h3><p><strong>减少</strong></p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//求和用</span></span><br><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]</span><br><span class="line">a.reduce(function(sum,n)&#123;   <span class="comment">//参数是个函数(必须两个参数)和一个初始项</span></span><br><span class="line">    return sum + n              <span class="comment">//把之前的项和当前项相加，返回下一次遍历的结果</span></span><br><span class="line">&#125;,<span class="number">0</span>)                        <span class="comment">//遍历一遍以后得到总和</span></span><br><span class="line"><span class="comment">// 45</span></span><br><span class="line">a.reduce((sum,n)=&gt; sum + n , <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h4 id="map可以用reduce表示"><a href="#map可以用reduce表示" class="headerlink" title="map可以用reduce表示"></a>map可以用reduce表示</h4><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">a.reduce(<span class="function"><span class="keyword">function</span><span class="params">(arr,n)</span></span>&#123;   <span class="comment">//之前项是arr，当前项是n</span></span><br><span class="line">    arr.push(n*<span class="number">2</span>)               <span class="comment">//把当前项的两倍push进数组</span></span><br><span class="line">    <span class="keyword">return</span> arr              <span class="comment">//返回到初始项(空数组)</span></span><br><span class="line">&#125;[])                            <span class="comment">//遍历一遍以后填满空数组</span></span><br><span class="line"><span class="comment">// [2,4,6]</span></span><br></pre></td></tr></table></figure>
<h4 id="filter可以用reduce表示"><a href="#filter可以用reduce表示" class="headerlink" title="filter可以用reduce表示"></a>filter可以用reduce表示</h4><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>]</span><br><span class="line">a.reduce(function(arr,n)&#123;   <span class="comment">//之前项是arr，当前项是n</span></span><br><span class="line">    if(n % <span class="number">2</span> === <span class="number">0</span>)&#123;            <span class="comment">//是不是偶数？是偶数就到碗里来</span></span><br><span class="line">        arr.push(n)         <span class="comment">//偶数推进去</span></span><br><span class="line">    &#125;</span><br><span class="line">    return arr                  <span class="comment">//返回到数组</span></span><br><span class="line">&#125;[])                        <span class="comment">//遍历一遍后填满空数组</span></span><br></pre></td></tr></table></figure>
<h1 id="4-Function"><a href="#4-Function" class="headerlink" title="4.Function"></a>4.Function</h1><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="keyword">function</span>(a,b)&#123;</span><br><span class="line">    <span class="keyword">return</span> a+b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="regexp">////</span><span class="regexp">////</span><span class="regexp">/用构造函数构造出来/</span><span class="regexp">////</span>/</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> Function(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'return a+b'</span>)        <span class="regexp">//把所有参数一字排开</span></span><br><span class="line"><span class="regexp">//</span><span class="keyword">var</span> f = <span class="keyword">new</span> Function(<span class="string">'参数'</span>, <span class="string">'参数'</span>, <span class="string">'构造体'</span>) </span><br><span class="line"></span><br><span class="line"><span class="regexp">//加不加new都一样</span></span><br></pre></td></tr></table></figure>
<h2 id="I-函数"><a href="#I-函数" class="headerlink" title="I.函数"></a>I.函数</h2>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/16/JavaScript-记了两个API/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张博涵">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Protoss Oracle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/16/JavaScript-记了两个API/" itemprop="url">JavaScript-记了两个API</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-16T21:28:55+08:00">2018-04-16</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-关于JS找兄弟"><a href="#1-关于JS找兄弟" class="headerlink" title="1.关于JS找兄弟"></a>1.关于JS找兄弟</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    setTimeout(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">            siteWelcome.classList.remove(<span class="string">'active'</span>)</span></span><br><span class="line"><span class="undefined">    &#125;,3000)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.onscroll = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span>(<span class="built_in">window</span>.scrollY &gt; <span class="number">0</span>)&#123;</span></span><br><span class="line"><span class="actionscript">            topNavBar.classList.add(<span class="string">'sticky'</span>)</span></span><br><span class="line"><span class="actionscript">        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="actionscript">            topNavBar.classList.remove(<span class="string">'sticky'</span>)                </span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> aTags = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'menuTigger'</span>)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;aTags.length; i++)&#123;</span></span><br><span class="line"><span class="actionscript">        aTags[i].onmouseenter = <span class="function"><span class="keyword">function</span><span class="params">(x)</span></span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> a = x.currentTarget</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> brother = a.nextSibling             <span class="comment">//这种找兄弟...真的毛病多。</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">while</span>(brother.tagName !== <span class="string">'UL'</span>)&#123;   <span class="comment">//nodeType去查文档，表达了不同元素节点。 1是元素节点 3是文字 PS:为什么大写UL，因为brother.tagName会返回一个大写的UL。</span></span></span><br><span class="line"><span class="actionscript">                brother = brother.nextSibling    <span class="comment">//递归找节点，不是节点继续找。</span></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="actionscript">            brother.classList.add(<span class="string">'active'</span>)</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="actionscript">        aTags[i].onmouseleave = <span class="function"><span class="keyword">function</span><span class="params">(x)</span></span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> a = x.currentTarget</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> brother = a.nextSibling</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">while</span>(brother.tagName !== <span class="string">'UL'</span>)&#123;</span></span><br><span class="line"><span class="undefined">                brother = brother.nextSibling</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="actionscript">            brother.classList.remove(<span class="string">'active'</span>)</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="找父级"><a href="#找父级" class="headerlink" title="找父级"></a>找父级</h2><p><code>.parentNode</code></p>
<h1 id="2-关于不找兄弟直接监听父级元素"><a href="#2-关于不找兄弟直接监听父级元素" class="headerlink" title="2.关于不找兄弟直接监听父级元素"></a>2.关于不找兄弟直接监听父级元素</h1><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">let liTags = document.getElementsByClassName(<span class="string">'menuTigger'</span>)</span><br><span class="line"><span class="function"><span class="title">for</span><span class="params">(let i=<span class="number">0</span>; i&lt;liTags.length; i++)</span></span>&#123;</span><br><span class="line">    liTags[i]<span class="selector-class">.onmouseenter</span> = function(x)&#123;</span><br><span class="line">        let <span class="selector-tag">li</span> = x.currentTarget</span><br><span class="line">        let brother = <span class="selector-tag">li</span>.getElementsByTagName(<span class="string">'ul'</span>)[<span class="number">0</span>]</span><br><span class="line">        brother<span class="selector-class">.classList</span><span class="selector-class">.add</span>(<span class="string">'active'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    liTags[i]<span class="selector-class">.onmouseleave</span> = function(x)&#123;</span><br><span class="line">        let <span class="selector-tag">li</span> = x.currentTarget</span><br><span class="line">        let brother = <span class="selector-tag">li</span>.getElementsByTagName(<span class="string">'ul'</span>)[<span class="number">0</span>]</span><br><span class="line">        brother<span class="selector-class">.classList</span><span class="selector-class">.remove</span>(<span class="string">'active'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="3-既然a和ul都要active，那我为什么不把他们的父元素active呢？"><a href="#3-既然a和ul都要active，那我为什么不把他们的父元素active呢？" class="headerlink" title="3.既然a和ul都要active，那我为什么不把他们的父元素active呢？"></a>3.既然a和ul都要active，那我为什么不把他们的父元素active呢？</h1><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let liTags = document.getElementsByClassName(<span class="string">'menuTigger'</span>)</span><br><span class="line"><span class="function"><span class="title">for</span><span class="params">(let i=<span class="number">0</span>; i&lt;liTags.length; i++)</span></span>&#123;</span><br><span class="line">    liTags[i]<span class="selector-class">.onmouseenter</span> = function(x)&#123;</span><br><span class="line">        x<span class="selector-class">.currentTarget</span><span class="selector-class">.classList</span><span class="selector-class">.add</span>(<span class="string">'active'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    liTags[i]<span class="selector-class">.onmouseleave</span> = function(x)&#123;</span><br><span class="line">        x<span class="selector-class">.currentTarget</span><span class="selector-class">.classList</span><span class="selector-class">.remove</span>(<span class="string">'active'</span>)            </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="4-不想每个都加-menuTigger那么我们就加个选择器吧"><a href="#4-不想每个都加-menuTigger那么我们就加个选择器吧" class="headerlink" title="4.不想每个都加.menuTigger那么我们就加个选择器吧"></a>4.不想每个都加.menuTigger那么我们就加个选择器吧</h1><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let liTags = document.querySelectorAll(<span class="string">'nav.menu &gt; ul &gt; li'</span>)</span><br><span class="line"><span class="function"><span class="title">for</span><span class="params">(let i=<span class="number">0</span>; i&lt;liTags.length; i++)</span></span>&#123;</span><br><span class="line">    liTags[i]<span class="selector-class">.onmouseenter</span> = function(x)&#123;</span><br><span class="line">        x<span class="selector-class">.currentTarget</span><span class="selector-class">.classList</span><span class="selector-class">.add</span>(<span class="string">'active'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    liTags[i]<span class="selector-class">.onmouseleave</span> = function(x)&#123;</span><br><span class="line">        x<span class="selector-class">.currentTarget</span><span class="selector-class">.classList</span><span class="selector-class">.remove</span>(<span class="string">'active'</span>)            </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>给nav一个.menu的class然后给他一个选择器，其中<code>querySelectorALL</code>就可以啦</p>
<h1 id="5-关于调整锚点"><a href="#5-关于调整锚点" class="headerlink" title="5.关于调整锚点"></a>5.关于调整锚点</h1><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let aTags = document.querySelectorAll(<span class="string">'nav.menu &gt; ul &gt; li &gt; a'</span>)</span><br><span class="line"><span class="function"><span class="title">for</span><span class="params">(let i = <span class="number">0</span>; i&lt;aTags.length; i++)</span></span>&#123;</span><br><span class="line">    aTags[i]<span class="selector-class">.onclick</span> = function(x)&#123;</span><br><span class="line">        x.preventDefault()          <span class="comment">//阻止默认动作</span></span><br><span class="line">        let <span class="selector-tag">a</span> = x.currentTarget</span><br><span class="line">        <span class="selector-tag">a</span>.getAttribute(<span class="string">'href'</span>)   <span class="comment">//用户写什么，打什么。不像a.href是带http协议的。</span></span><br><span class="line">        console.log(<span class="selector-tag">a</span>.getAttribute(<span class="string">'href'</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="需要获取div距离顶部的距离"><a href="#需要获取div距离顶部的距离" class="headerlink" title="需要获取div距离顶部的距离"></a>需要获取div距离顶部的距离</h2><p><code>getBoundingClientRect</code>这个api可以返回一组矩形集合（数组）<br>一组用于描述边框的只读属性（left top right bottom）单位px<br>除了width和heigth外的属性都相对于视口左上角位置而言。</p>
<p>计算边界矩形时，会考虑视口区域（或其他可滚动元素）内的滚动操作which means:<br>滚动的时候这个值会变，不是计算页面顶部而是计算视口顶部。<br><strong>不想让他变的话：</strong><br>给top和left加上当前滚动位置：<code>window.scrollX</code>和<code>window.scrollY</code>这样获取与当前滚动位置无关的常量值。<br>为兼容请使用：<code>window.pageXOffset</code>和<code>window.pageYOffset</code></p>
<h2 id="这个才是我们需要的"><a href="#这个才是我们需要的" class="headerlink" title="这个才是我们需要的"></a>这个才是我们需要的</h2><p><code>element.offsetTop</code></p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> aTags = <span class="built_in">document</span>.querySelectorAll(<span class="string">'nav.menu &gt; ul &gt; li &gt; a'</span>)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i&lt;aTags.length; i++)&#123;</span><br><span class="line">    aTags[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">        x.preventDefault()          <span class="comment">//阻止默认动作</span></span><br><span class="line">        <span class="keyword">let</span> a = x.currentTarget</span><br><span class="line">        <span class="keyword">let</span> href = a.getAttribute(<span class="string">'href'</span>) <span class="comment">//'#siteAbout'</span></span><br><span class="line">        <span class="keyword">let</span> element = <span class="built_in">document</span>.querySelector(href)</span><br><span class="line">        <span class="keyword">let</span> <span class="built_in">rect</span> = element.getBoundingClientRect()</span><br><span class="line">        <span class="keyword">let</span> top = element.offsetTop</span><br><span class="line">        <span class="built_in">window</span>.scrollTo(<span class="number">0</span>,top<span class="number">-80</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="6-总结一下"><a href="#6-总结一下" class="headerlink" title="6.总结一下"></a>6.总结一下</h1><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">setTimeout</span><span class="params">()</span></span>        <span class="comment">//设置延迟</span></span><br><span class="line">window<span class="selector-class">.onscroll</span> <span class="comment">//滚动时触发</span></span><br><span class="line">window<span class="selector-class">.scrollY</span>      <span class="comment">//获取滚动高度</span></span><br><span class="line">document.querySelectorALL()   <span class="comment">//接收一个选择器，获取选择器的所有元素</span></span><br><span class="line"><span class="selector-class">.onmouseenter</span>   <span class="comment">//鼠标进入元素的时候触发函数</span></span><br><span class="line"><span class="selector-class">.onmouseleave</span>       <span class="comment">//鼠标离开元素的时候触发函数</span></span><br><span class="line"><span class="selector-class">.preventDefault</span> <span class="comment">//调用它就不会有默认的动作了</span></span><br><span class="line">.getAttribute()     <span class="comment">//获取用户在元素上写的原文（不加HTTP协议）</span></span><br><span class="line">document.querySelector()      <span class="comment">//只会获取到第一个元素</span></span><br><span class="line"><span class="selector-class">.offsetTop</span>      <span class="comment">//获取元素距离页面顶部的像素数。</span></span><br><span class="line">window.scrollTo(X,Y)    <span class="comment">//滑动到某个位置X：左右 Y：上下。改成0就是不会划。</span></span><br></pre></td></tr></table></figure>
<h1 id="7-用js做动画"><a href="#7-用js做动画" class="headerlink" title="7.用js做动画"></a>7.用js做动画</h1><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#div1&#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">	<span class="attribute">background</span>: black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div1<span class="selector-class">.style</span><span class="selector-class">.position</span> = <span class="string">'relative'</span></span><br><span class="line">div1<span class="selector-class">.style</span><span class="selector-class">.left</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">var</span> n = <span class="number">0</span></span><br><span class="line"><span class="selector-tag">var</span> id = setInterval( ()=&gt; &#123;</span><br><span class="line">	n = n+<span class="number">10</span></span><br><span class="line">	div1<span class="selector-class">.style</span><span class="selector-class">.left</span> = n + <span class="string">'px'</span></span><br><span class="line">	<span class="keyword">if</span>(n&gt;=<span class="number">200</span>)&#123;</span><br><span class="line">		window.clearInterval(id)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;,<span class="number">40</span>)</span><br></pre></td></tr></table></figure>
<p>通过每秒动很多下，让人感觉它是个动画。<br><code>.setInterval</code>让他按延迟一直动<br><code>.setTimeout</code>让他延迟几秒后动一下<br><code>window.clearInterval(id)</code>让他在条件下停止</p>
<h1 id="8-console-log调试大法"><a href="#8-console-log调试大法" class="headerlink" title="8.console.log调试大法"></a>8.console.log调试大法</h1><p>发现bug的时候，请console.log相关变量<br>看看哪个值和想象中不一样。</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">n</span> = <span class="number">25</span> //一共动多少次</span><br><span class="line"><span class="keyword">let</span> <span class="attr">duration</span> = <span class="number">500</span> / n  //多长时间动一次</span><br><span class="line"><span class="keyword">let</span> <span class="attr">currentTop</span> = window.scrollY</span><br><span class="line"><span class="keyword">let</span> <span class="attr">targetTop</span> = top - <span class="number">80</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">distance</span> = (targetTop - currentTop)/ n</span><br><span class="line"><span class="keyword">let</span> <span class="attr">i</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">id</span> = setInterval(()=&gt;&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="attr">i===n)&#123;</span></span><br><span class="line">    window.clearInterval(id)</span><br><span class="line">    return</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">i</span> = i + <span class="number">1</span></span><br><span class="line">    window.scrollTo(<span class="number">0</span>,currentTop + distance * i)</span><br><span class="line">&#125;,duration)</span><br></pre></td></tr></table></figure>
<p>平滑的滚屏，但是还不够平滑。</p>
<h2 id="我们需要神奇的tween-js"><a href="#我们需要神奇的tween-js" class="headerlink" title="我们需要神奇的tween.js"></a>我们需要神奇的tween.js</h2><p>缓动<br>要调用他需要cdnjs(google it)<br>这个库还是蛮好的。</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">animate</span>(<span class="params">time</span>) </span>&#123;</span><br><span class="line">            requestAnimationFrame(animate);    <span class="comment">//请求动画帧数（问浏览器这台机器可以让你有多少FPS）</span></span><br><span class="line">            TWEEN.update(time);</span><br><span class="line">        &#125;</span><br><span class="line">        requestAnimationFrame(animate);</span><br><span class="line"></span><br><span class="line"><span class="comment">///////////////////////tween文档让加的告诉我们间隔多少毫秒动一次///////////////////////////</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i&lt;aTags.length; i++)&#123;</span><br><span class="line">            aTags[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">                x.preventDefault()          <span class="comment">//阻止默认动作</span></span><br><span class="line">                <span class="keyword">let</span> a = x.currentTarget</span><br><span class="line">                <span class="keyword">let</span> href = a.getAttribute(<span class="string">'href'</span>) <span class="comment">//'#siteAbout'</span></span><br><span class="line">                <span class="keyword">let</span> element = <span class="built_in">document</span>.querySelector(href)</span><br><span class="line">                <span class="keyword">let</span> <span class="built_in">rect</span> = element.getBoundingClientRect()</span><br><span class="line">                <span class="keyword">let</span> top = element.offsetTop</span><br><span class="line"></span><br><span class="line">                <span class="keyword">let</span> currentTop = <span class="built_in">window</span>.scrollY</span><br><span class="line">                <span class="keyword">let</span> targetTop = top - <span class="number">80</span></span><br><span class="line">                <span class="keyword">let</span> s = targetTop - currentTop              <span class="comment">//路程</span></span><br><span class="line">                <span class="keyword">var</span> t = <span class="built_in">Math</span>.abs((s/<span class="number">100</span>)*<span class="number">300</span>)           <span class="comment">//时间（绝对值）</span></span><br><span class="line">                <span class="keyword">if</span>(t&gt;<span class="number">500</span>)&#123;t = <span class="number">500</span>&#125;</span><br><span class="line">                <span class="keyword">var</span> coords = &#123; <span class="attribute">y</span>: currentTop &#125;;         <span class="comment">//初始位置</span></span><br><span class="line">                <span class="keyword">var</span> tween = <span class="keyword">new</span> TWEEN.Tween(coords)         <span class="comment">//初始位置</span></span><br><span class="line">                    .to(&#123; <span class="attribute">y</span>: targetTop&#125;, t)             <span class="comment">//结束位置，时间（不能使负值）</span></span><br><span class="line">                    .easing(TWEEN.Easing.Quadratic.InOut)   <span class="comment">//缓动类型</span></span><br><span class="line">                    .onUpdate(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;             <span class="comment">//在这里coords.y已经变了</span></span><br><span class="line">                        <span class="built_in">window</span>.scrollTo(<span class="number">0</span>,coords.y)         <span class="comment">//如何更新界面（向下滚动coords.y）</span></span><br><span class="line">                    &#125;)</span><br><span class="line">                    .start();       <span class="comment">//开始缓动</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>通过tween.js来计算滚动速度<br>Math.abs()来得出绝对值</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/12/JavaScript-对象/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张博涵">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Protoss Oracle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/12/JavaScript-对象/" itemprop="url">JavaScript-对象</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-12T15:46:37+08:00">2018-04-12</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-全局对象"><a href="#1-全局对象" class="headerlink" title="1.全局对象"></a>1.全局对象</h1><h2 id="I-window（global）"><a href="#I-window（global）" class="headerlink" title="I.window（global）"></a>I.window（global）</h2><p>标准里他叫做global<br>浏览器上他叫做window<br>是一个对象</p>
<h3 id="i-属性"><a href="#i-属性" class="headerlink" title="i.属性"></a>i.属性</h3><p>例：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">global</span>.parseInt</span><br><span class="line"><span class="keyword">global</span>.parseFloat</span><br></pre></td></tr></table></figure>
<h3 id="ii-属性分为两类"><a href="#ii-属性分为两类" class="headerlink" title="ii.属性分为两类"></a>ii.属性分为两类</h3><p>如果函数是<code>window.</code>那么这个<code>window.</code>可以省掉，毕竟它是全局函数。</p>
<h4 id="ECMAScript规定要有的"><a href="#ECMAScript规定要有的" class="headerlink" title="ECMAScript规定要有的"></a>ECMAScript规定要有的</h4><p>比如</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">parseInt</span><br><span class="line">parseFloat</span><br><span class="line"><span class="function"><span class="title">Number</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">String</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">Boolean</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">Object</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<p>必须得有</p>
<h4 id="私有的（浏览器私有的）"><a href="#私有的（浏览器私有的）" class="headerlink" title="私有的（浏览器私有的）"></a>私有的（浏览器私有的）</h4><p>比如</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">alert（弹框提示）</span><br><span class="line">prompt（用户填写）</span><br><span class="line">confirm（用户确认）</span><br><span class="line">console（开发者打印）</span><br><span class="line"><span class="function"><span class="title">document</span><span class="params">(能对文档做的所有操作)</span><span class="title">DOM</span><span class="params">(w3c制定)</span></span></span><br><span class="line"><span class="function"><span class="title">history</span><span class="params">(浏览器操作)</span><span class="title">BOM</span></span></span><br></pre></td></tr></table></figure>
<p>都是浏览器自己实现的</p>
<h1 id="2-简单类型与对象的区别"><a href="#2-简单类型与对象的区别" class="headerlink" title="2.简单类型与对象的区别"></a>2.简单类型与对象的区别</h1><h2 id="I-Number"><a href="#I-Number" class="headerlink" title="I.Number()"></a>I.Number()</h2><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><h4 id="var-n-1"><a href="#var-n-1" class="headerlink" title="var n = 1"></a>var n = 1</h4><p>但是它不能.toString</p>
<h4 id="var-n-new-Number-1"><a href="#var-n-new-Number-1" class="headerlink" title="var n = new Number(1)"></a>var n = new Number(1)</h4><p>这个方法很少人用…</p>
<figure class="highlight clojure-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1=&gt;</span><span class="clojure">&#123;valueOf():<span class="number">1</span>,&#125; //把<span class="number">1</span>转变成对象</span></span><br></pre></td></tr></table></figure>
<p>历史遗留问题</p>
<h4 id="如何写的简单同时又可以用-toString呢？"><a href="#如何写的简单同时又可以用-toString呢？" class="headerlink" title="如何写的简单同时又可以用.toString呢？"></a>如何写的简单同时又可以用.toString呢？</h4><p>临时转换：</p>
<figure class="highlight pony"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">temp = <span class="function"><span class="keyword">new</span> <span class="title">Number</span>(n)</span></span><br><span class="line"><span class="function"><span class="title">temp</span>.<span class="title">toString</span>()</span></span><br><span class="line"><span class="function">拿到对象里的值再输出</span></span><br><span class="line"><span class="function">然后去除<span class="title">temp</span>的<span class="title">ADDR</span></span></span><br><span class="line"><span class="function">对象内容被回收</span></span><br><span class="line"><span class="function"><span class="title">END</span></span></span><br></pre></td></tr></table></figure>
<p>所以在：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="keyword">n</span> = 1</span><br><span class="line"><span class="keyword">n</span>.<span class="keyword">toString</span>() <span class="comment">//发生了一次temp的转换</span></span><br></pre></td></tr></table></figure>
<p><strong>JS之父做的操作</strong></p>
<h2 id="II-String"><a href="#II-String" class="headerlink" title="II.String()"></a>II.String()</h2><p>操作和Number()一样</p>
<h3 id="记几个API吧"><a href="#记几个API吧" class="headerlink" title="记几个API吧"></a>记几个API吧</h3><table>
<thead>
<tr>
<th style="text-align:center">API</th>
<th style="text-align:center">作用</th>
<th style="text-align:center">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">.charAt(n)</td>
<td style="text-align:center">获取第n位的字符</td>
<td style="text-align:center">n为第几位</td>
</tr>
<tr>
<td style="text-align:center">.charCodeAt(n)</td>
<td style="text-align:center">获取某一个索引对应的字符的编码</td>
<td style="text-align:center">n为第几位。</td>
</tr>
<tr>
<td style="text-align:center">(数字).toString(进制数)</td>
<td style="text-align:center">将数字转换为制定进制数</td>
<td style="text-align:center">可以和<code>.charCodeAt(n)</code>组合使用</td>
</tr>
<tr>
<td style="text-align:center">concat()</td>
<td style="text-align:center">连接两个字符串</td>
<td style="text-align:center"><code>字符串1.concat(字符串2)</code>和命令行的<code>cat</code>是不是兄弟</td>
</tr>
<tr>
<td style="text-align:center">endsWith()</td>
<td style="text-align:center">一个字符串以什么结尾</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">.trim()</td>
<td style="text-align:center">去掉两边的空格</td>
<td style="text-align:center"><code>字符串.trim()</code></td>
</tr>
<tr>
<td style="text-align:center">.slice</td>
<td style="text-align:center">切片，保留指定位</td>
<td style="text-align:center"><code>目标字符串.slice(0,2)</code>仅保留前两位（这两个数字包前不包后）</td>
</tr>
<tr>
<td style="text-align:center">.replace</td>
<td style="text-align:center">替换</td>
<td style="text-align:center"><code>字符串.replace(&#39;要换谁&#39;,&#39;换成谁&#39;)</code></td>
</tr>
</tbody>
</table>
<h2 id="III-Bullean"><a href="#III-Bullean" class="headerlink" title="III.Bullean()"></a>III.Bullean()</h2><p>里面东西超少</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">toString</span></span><br><span class="line"><span class="attribute">valueOf</span></span><br></pre></td></tr></table></figure>
<h2 id="IV-null和undefined没有对应的函数"><a href="#IV-null和undefined没有对应的函数" class="headerlink" title="IV.null和undefined没有对应的函数"></a>IV.null和undefined没有对应的函数</h2><h2 id="V-object"><a href="#V-object" class="headerlink" title="V.object"></a>V.object</h2><p>之前都是基本类型<br>现在到了对象</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o1 = &#123;&#125;</span><br><span class="line"><span class="keyword">var</span> o2 = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line"><span class="comment">// 他俩都是空的，但是。</span></span><br><span class="line">o1 === o2 <span class="comment">//false</span></span><br><span class="line"><span class="comment">// 回到前面ADDR和对象的关系，o1和o2的地址不一样，就算内容一样，也不相等。</span></span><br></pre></td></tr></table></figure>
<p>所以，直接用<code>var o1 = {}</code>吧，他俩没差，还少敲几个字符。你又不是敲java。</p>
<h2 id="VI-总结一下"><a href="#VI-总结一下" class="headerlink" title="VI.总结一下"></a>VI.总结一下</h2><p>他们都有<code>toString()</code>和<code>valueOf()</code><br>那岂不是很占内存<br>可不可以都用同一个<code>toString()</code>和<code>valueOf()</code></p>
<p>如何让他们都指向同一个<code>toString()</code>和<code>valueOf()</code>呢？</p>
<h3 id="JS向你掏出来了一只-proto"><a href="#JS向你掏出来了一只-proto" class="headerlink" title="JS向你掏出来了一只__proto__"></a>JS向你掏出来了一只<code>__proto__</code></h3><h1 id="3-原型"><a href="#3-原型" class="headerlink" title="3.原型"></a>3.原型</h1><h2 id="举个例子"><a href="#举个例子" class="headerlink" title="举个例子"></a>举个例子</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var o1 = new object()</span><br><span class="line">o1.name = <span class="string">'oracle'</span></span><br><span class="line">o1.age = <span class="string">'24'</span></span><br><span class="line"><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span></span><br><span class="line">o1 ADDR <span class="number">200</span>:</span><br><span class="line">name: oracle</span><br><span class="line">age: <span class="number">24</span></span><br><span class="line">...</span><br><span class="line">__proto__:ADDR <span class="number">100</span> <span class="regexp">//</span>用__proto__指向共用属性</span><br><span class="line"><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span></span><br><span class="line">ADDR <span class="number">100</span>(共用属性):</span><br><span class="line">...</span><br><span class="line">toString: A10</span><br><span class="line">valueOf: A11</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>他们都指向共用属性，检查一下？</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">o1</span> === o2 //<span class="literal">false</span></span><br><span class="line">//因为他们是不同对象</span><br><span class="line">o1.<span class="attr">toString</span> === o2.<span class="built_in">toString</span> //<span class="literal">true</span></span><br><span class="line">//但他们的.<span class="built_in">toString</span>都指向共用属性</span><br></pre></td></tr></table></figure>
<h2 id="I-那么简单类型的共用属性呢？"><a href="#I-那么简单类型的共用属性呢？" class="headerlink" title="I.那么简单类型的共用属性呢？"></a>I.那么简单类型的共用属性呢？</h2><p>想象一棵树，根部是<code>object</code>的共有属性。</p>
<h3 id="i-比如number"><a href="#i-比如number" class="headerlink" title="i.比如number"></a>i.比如number</h3><p><code>var n = nwe Number(1)</code><br>这里面的<code>toString</code>和<code>obj</code>里的不一样耶。他都可以转进制数。<br>而且他还有别的<code>.toFixed</code>什么的</p>
<p>首先，number会指向一个number才有的共用属性：</p>
<figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="built_in">toFixed</span></span><br><span class="line">toExponential</span><br><span class="line"><span class="built_in">toString</span></span><br><span class="line">...</span><br><span class="line"><span class="variable">__proto__</span>: Object <span class="comment">//这一层再放一个__proto__去找所有对象的共用属性</span></span><br></pre></td></tr></table></figure>
<p>然后在number的共用属性里面，找对象的共用属性<br><strong>自己用不一样的，再从别处引用一样的</strong></p>
<h2 id="II-这就是原型链"><a href="#II-这就是原型链" class="headerlink" title="II.这就是原型链"></a>II.这就是原型链</h2><p>从它的类型到它的类型的共用属性在到对象的共用属性，一条链过去，一路都是节点。</p>
<h3 id="i-prototype"><a href="#i-prototype" class="headerlink" title="i.prototype"></a>i.prototype</h3><p>如果一个哈希没有被引用的话，他会被浏览器垃圾回收（没大哥罩着就要被干掉）<br>那么共用属性在没人引用的时候，就是prototype在引用他。</p>
<p>从现在起，把共用属性这个词，换成<strong>原型</strong>。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype</span><br><span class="line"><span class="keyword">var</span> o1 = &#123;&#125;</span><br><span class="line">o1.__proto__ === <span class="built_in">Object</span>.prototype  <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>这样就清晰了，它们一直以来，引用的是谁。</p>
<h3 id="ii-Number-prototype"><a href="#ii-Number-prototype" class="headerlink" title="ii.Number.prototype"></a>ii.Number.prototype</h3><p>了解到<code>number</code>属性自己的原型里面还有引用对象的原型，做个测试：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n1 = <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">1</span>)</span><br><span class="line">n1.__proto__ === <span class="built_in">Number</span>.prototype <span class="comment">//true</span></span><br><span class="line">n1.__proto__.__proto__  === <span class="built_in">Object</span>.prototype  <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>那么我们就可以理解为什么<br><code>n1.hasOwnProperty(&#39;2&#39;)  //false</code><br>n1可以调用他第一层<code>__proto__</code>里没有的<code>.hasOwnProperty</code>了<br>因为会一层一层的找，第一层找不到找第二层。<br><strong>这条链子在JS引擎开启的时候就连上了</strong></p>
<h2 id="III-proto-和prototype有什么区别"><a href="#III-proto-和prototype有什么区别" class="headerlink" title="III.__proto__和prototype有什么区别"></a>III.<code>__proto__</code>和<code>prototype</code>有什么区别</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String<span class="selector-class">.prototype</span>   <span class="comment">//是 String 的共用属性的引用（不让共用属性被清理）</span></span><br><span class="line">s.__proto__   <span class="comment">//是 String 的共用属性的引用（真的是要用它）</span></span><br></pre></td></tr></table></figure>
<h3 id="i-形式上呢？"><a href="#i-形式上呢？" class="headerlink" title="i.形式上呢？"></a>i.形式上呢？</h3><p>var 接对象 = new 接函数(也是对象)</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 对象 = <span class="keyword">new</span> <span class="type"></span>函数()</span><br><span class="line">对象.__proto__ === 函数.prototype</span><br></pre></td></tr></table></figure>
<p>那么我们可以说他们的区别：<br><code>__proto__</code>是对象的属性<br><code>prototype</code>是函数的属性</p>
<h2 id="IV-特殊的function"><a href="#IV-特殊的function" class="headerlink" title="IV.特殊的function"></a>IV.特殊的function</h2><p>找寻本源：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.__proto__ === <span class="built_in">Object</span>.prototype <span class="comment">//false</span></span><br><span class="line"><span class="built_in">Object</span>.__proto__ === <span class="built_in">Function</span>.prototype</span><br><span class="line"><span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>问题来了，我们把<code>__proto__</code>当成链<br>把<code>prototype</code>当成锚</p>
<p><code>Function</code>本身也是一个<code>Function</code>对象</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var <span class="function"><span class="keyword">Function</span></span> = new <span class="function"><span class="keyword">Function</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">Function</span>.<span class="title">__proto__</span></span> === <span class="function"><span class="keyword">Function</span>.<span class="title">prototype</span></span>   //true</span><br><span class="line">//他自己是<span class="function"><span class="keyword">Function</span></span>对象，我要通过<span class="function"><span class="keyword">Function</span></span>对象会指向<span class="function"><span class="keyword">Function</span></span>函数。</span><br></pre></td></tr></table></figure>
<p>思考一下，是不是先有鸡还是先有蛋的问题。<br>并不是，我有一个<code>Function.prototype</code>才可以调用这个函数构造<code>Function对象</code>。<br>但是它本身已经存在了，为什么要构造自己，所以<code>Function.__proto__</code>会指向自己。</p>
<p>同理<code>看似Object.prototype</code>是大BOSS，谁都指向他。<br>其实他也是通过<code>Function.prototype</code>构造的，也就是说是<code>Function</code>是<code>Object</code>的<strong>构造函数</strong>。</p>
<p><strong>有没有一种垂帘听政的感觉</strong></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/11/JavaScript-类型/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张博涵">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Protoss Oracle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/11/JavaScript-类型/" itemprop="url">JavaScript-类型</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-11T10:10:04+08:00">2018-04-11</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-首先要搞清楚什么是内存"><a href="#1-首先要搞清楚什么是内存" class="headerlink" title="1.首先要搞清楚什么是内存"></a>1.首先要搞清楚什么是内存</h1><p>干吗用的？存东西用的。通电存东西，断电就GG。<br>外存没有内存快<br>最快的外存不就是SSD嘛，因为它能接近内存的速度。<br>机械硬盘，就很容易坏，十年基本就坏了。<br>SSD，不容易坏，但是一坏就全坏了。</p>
<h2 id="I-它是怎么工作的"><a href="#I-它是怎么工作的" class="headerlink" title="I.它是怎么工作的"></a>I.它是怎么工作的</h2><h3 id="i-举个例子"><a href="#i-举个例子" class="headerlink" title="i.举个例子"></a>i.举个例子</h3><p>假设内存有2G<br>开机<br>操作系统 512M<br>浏览器 1G （浏览器真的很占内存）<br>假设浏览器两个页面</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">页面<span class="number">1</span>（<span class="number">100</span>M）</span><br><span class="line">        HTML+CSS+JS+网络HTTP+其他 </span><br><span class="line">页面<span class="number">2</span>（<span class="number">100</span>M）</span><br><span class="line">        ...</span><br></pre></td></tr></table></figure>
<p>假设JS分到了100M<br>我们写了一个<code>var a = 1</code><br>小心翼翼分成两个大区</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">代码区</span><br><span class="line">        a</span><br><span class="line">        </span><br><span class="line">数据区</span><br><span class="line">        <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>如果写复杂点</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">a</span> = <span class="number">1</span></span><br><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">b</span> = <span class="string">'Oracle'</span></span><br><span class="line"><span class="selector-tag">b</span> = a</span><br><span class="line"><span class="selector-tag">var</span> o = &#123;</span><br><span class="line">        name:<span class="string">'Oracle'</span>,</span><br><span class="line">        age: <span class="number">24</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">var</span> c = true</span><br><span class="line">o<span class="selector-class">.gender</span> = <span class="string">'male'</span></span><br><span class="line"><span class="selector-tag">var</span> o2 = &#123;</span><br><span class="line">        name: <span class="string">'Protoss'</span></span><br><span class="line">&#125;</span><br><span class="line">o2 = o</span><br><span class="line">第一步：变量提升，把var都放在前面</span><br><span class="line">之后依次执行</span><br></pre></td></tr></table></figure>
<p>其实数据区也分为两个——<br>Stack（栈）和Heap（堆）</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Stack（栈内存）</span><br><span class="line">        <span class="selector-tag">a</span>:<span class="number">64</span>位浮点数储存a</span><br><span class="line">        <span class="selector-tag">b</span>:<span class="number">64</span>位浮点数储存b</span><br><span class="line">        b=<span class="selector-tag">a</span>:把a存的东西，覆盖到b上</span><br><span class="line">        c:第一位为<span class="number">1</span>后面全是<span class="number">0</span>存一个true</span><br><span class="line">        <span class="selector-tag">var</span> o =&#123;&#125;:存一个地址ADDR <span class="number">100</span> <span class="comment">//去Heap（堆内存）找</span></span><br><span class="line">        o<span class="selector-class">.gender</span> = <span class="string">'male'</span>:找到o的地址（ADDR <span class="number">100</span>）把它加进去。</span><br><span class="line">        <span class="selector-tag">var</span> o2 = &#123;&#125;:和o一样存一个地址ADDR <span class="number">200</span></span><br><span class="line">        o2 = o: 和<span class="selector-tag">b</span> = a的操作一样，不一样的是把o的地址给o2</span><br><span class="line">                o2的ADDR <span class="number">200</span>变成了ADDR <span class="number">100</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Heap（堆内存）</span><br><span class="line">        ADDR <span class="number">100</span></span><br><span class="line">                name:<span class="string">'Oracle'</span></span><br><span class="line">                age: <span class="number">24</span></span><br><span class="line">                <span class="comment">/////////////</span></span><br><span class="line">                gender: <span class="string">'male'</span></span><br><span class="line">        ADDR <span class="number">200</span></span><br><span class="line">                name:<span class="string">'protoss'</span></span><br></pre></td></tr></table></figure>
<p>这一套操作</p>
<h3 id="ii-数据"><a href="#ii-数据" class="headerlink" title="ii.数据"></a>ii.数据</h3><p>数字：64位<br>字符：16位（ES3）<br>值：<br><strong>简单</strong>:存Stack<br><strong>复杂</strong>(obj):存Heap地址（还是存在Stack里面）</p>
<h3 id="iii-引用"><a href="#iii-引用" class="headerlink" title="iii.引用"></a>iii.引用</h3><p>object存入ADDR 100<br>就可以称object是对象的<strong>引用</strong><br>所有变量和对象的<strong>关系</strong>，都是<strong>引用关系</strong></p>
<h3 id="iv-存在对象问题的时候，走一遍i里的流程就清楚了"><a href="#iv-存在对象问题的时候，走一遍i里的流程就清楚了" class="headerlink" title="iv.存在对象问题的时候，走一遍i里的流程就清楚了"></a>iv.存在对象问题的时候，走一遍i里的流程就清楚了</h3><p>PS：连续赋值从右往左顺序拆开写。</p>
<h2 id="II-垃圾回收"><a href="#II-垃圾回收" class="headerlink" title="II.垃圾回收"></a>II.垃圾回收</h2><p>GC<br>如果一个<code>对象</code><strong>没有被引用</strong><br>它就是<strong>垃圾</strong><br>将被回收</p>
<h3 id="i-例"><a href="#i-例" class="headerlink" title="i.例"></a>i.例</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">a</span> = &#123;name:<span class="string">'a'</span>&#125;</span><br><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">b</span> = &#123;name:<span class="string">'b'</span>&#125;</span><br><span class="line"><span class="selector-tag">a</span> = b</span><br></pre></td></tr></table></figure>
<p>这时候，b和a指向了同一个ADDR<br>那么a原来的ADDR就变成了垃圾<br><strong>没人罩着，就要被干掉…</strong></p>
<h3 id="ii-IE有个BUG"><a href="#ii-IE有个BUG" class="headerlink" title="ii.IE有个BUG"></a>ii.IE有个BUG</h3><p>如果把页面关了(body没了，他引用的地址断了)<br>地址之间互相引用，但不和外部联系<br>他们本应该被清掉<br>但是（尤其IE6）IE里，你只要不关掉整个IE，他们会一直存着。<br>垃圾一直存着…内存boom。<br>所以需要在页面关闭之前执行：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onunload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">document</span>.body.onclick = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//然而需要把所有的监听的函数都设为null，需要写很多行。</span></span><br></pre></td></tr></table></figure>
<p>这就是传说中的——内存泄漏：<br>由于浏览器的BUG,使得该被标记为垃圾的东西，没有被标记为垃圾。</p>
<h1 id="2-深拷贝？浅拷贝？"><a href="#2-深拷贝？浅拷贝？" class="headerlink" title="2.深拷贝？浅拷贝？"></a>2.深拷贝？浅拷贝？</h1><h2 id="I-深拷贝"><a href="#I-深拷贝" class="headerlink" title="I.深拷贝"></a>I.深拷贝</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">a</span> = <span class="number">1</span></span><br><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">b</span> = a</span><br><span class="line"><span class="selector-tag">b</span> = <span class="number">2</span></span><br><span class="line"><span class="comment">//a = 1不改变</span></span><br></pre></td></tr></table></figure>
<p>b的改变不影响a<br>这就是深拷贝<br>基本类型 赋值 就是深拷贝</p>
<h2 id="II-浅拷贝"><a href="#II-浅拷贝" class="headerlink" title="II.浅拷贝"></a>II.浅拷贝</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">a</span> = &#123;</span><br><span class="line">        name: <span class="string">'a'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">b</span> = a</span><br><span class="line"><span class="selector-tag">b</span><span class="selector-class">.name</span> = <span class="string">'b'</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.name</span> <span class="comment">// 也是b了</span></span><br></pre></td></tr></table></figure>
<p>指向同一个ADDR改变地址对应的内容后<br>a也变了。<br>这就是浅拷贝。</p>
<h1 id="3-类型互相转换"><a href="#3-类型互相转换" class="headerlink" title="3.类型互相转换"></a>3.类型互相转换</h1><h2 id="I-方法"><a href="#I-方法" class="headerlink" title="I.方法"></a>I.方法</h2><h3 id="i-转字符串-toString"><a href="#i-转字符串-toString" class="headerlink" title="i.转字符串.toString"></a>i.转字符串<code>.toString</code></h3><p><code>null</code>不可以，会报错<br><code>undefined</code>不可以，会报错<br><code>object</code>并不能得到想要的<code>key:value</code>只会得到<code>[obj,Obj]</code></p>
<p>我们热爱的<code>console.log</code>就是这个原理<br>如果你<code>console.log</code>的东西不是字符串，他会自动加上一个<code>toString</code></p>
<h4 id="toString太长了老司机怎么转的？"><a href="#toString太长了老司机怎么转的？" class="headerlink" title=".toString太长了老司机怎么转的？"></a><code>.toString</code>太长了老司机怎么转的？</h4><p>数字：加上一个空字符串就好了。<br><code>1 + &#39;&#39;</code><br>布尔：加上一个空字符串就好了。<br><code>true + &#39;&#39;</code><br>顺序可反。<br>而且<code>&#39;&#39; + null</code>和<code>&#39;&#39; + undefined</code>也可以哟</p>
<h4 id="这时候就引出一个问题"><a href="#这时候就引出一个问题" class="headerlink" title="这时候就引出一个问题"></a>这时候就引出一个问题</h4><p><code>1+1</code>等于2<br><code>1 + &#39;1&#39;</code>算什么<br>加号会优先加相同类型的东西，所以他会先把数字变成字符串。</p>
<h4 id="全局方法window-String"><a href="#全局方法window-String" class="headerlink" title="全局方法window.String()"></a>全局方法<code>window.String()</code></h4><p>把不是字符串的东西，变成字符串。（可以变<code>null</code>和<code>undefined</code>）</p>
<h4 id="所以最方便的转字符串方法是加上一个空字符串"><a href="#所以最方便的转字符串方法是加上一个空字符串" class="headerlink" title="所以最方便的转字符串方法是加上一个空字符串"></a>所以最方便的转字符串方法是加上一个空字符串</h4><h3 id="ii-转布尔Boolean"><a href="#ii-转布尔Boolean" class="headerlink" title="ii.转布尔Boolean()"></a>ii.转布尔<code>Boolean()</code></h3><p>字符串:  <code>Boolean(1) //true</code><br>        <code>Boolean(0) //false</code><br>        <code>Boolean(2) //true</code><br>        <code>Boolean( ) //true</code><br>null:   <code>Boolean(null) //false</code><br>undefined: <code>Boolean(undefined) //false</code><br>对象:    <code>Boolean({}) //true</code><br>        <code>Boolean({name:&#39;Oracle&#39;})  //true</code></p>
<h4 id="这个API好长…"><a href="#这个API好长…" class="headerlink" title="这个API好长…"></a>这个API好长…</h4><p><code>!</code>可以取反<br>那么取反两次不就是原来的吗</p>
<figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">!!null //false</span><br><span class="line">!!<span class="number">0</span> //false</span><br><span class="line">!!&#123;&#125; //true</span><br><span class="line">!!&#123;name:'Oracle'&#125; //true</span><br></pre></td></tr></table></figure>
<h4 id="所有类型都可以变成布尔但是好难记哦"><a href="#所有类型都可以变成布尔但是好难记哦" class="headerlink" title="所有类型都可以变成布尔但是好难记哦"></a>所有类型都可以变成布尔但是好难记哦</h4><p>只有五个特殊的<br>number： 只有两个是false<code>0</code>和<code>NaN</code><br>String： 只有空字符串是<code>false</code>其他全是<code>true</code><br>null： 就一个值，<code>false</code><br>undefined：就一个值<code>false</code><br>object：都是<code>true</code>所有的数组和函数</p>
<p>也就是有五个<code>falsy</code>值<br><code>0</code><br><code>NaN</code><br><code>&#39;&#39;</code><br><code>null</code><br><code>undefined</code><br>还有个<code>false</code>因为他本来就是<code>false</code></p>
<h3 id="iii-转number"><a href="#iii-转number" class="headerlink" title="iii.转number"></a>iii.转number</h3><h4 id="朴实方法Number-39-1-39"><a href="#朴实方法Number-39-1-39" class="headerlink" title="朴实方法Number(&#39;1&#39;)"></a>朴实方法<code>Number(&#39;1&#39;)</code></h4><h4 id="全局方法parseInt-39-1-39-10"><a href="#全局方法parseInt-39-1-39-10" class="headerlink" title="全局方法parseInt(&#39;1&#39;,10)"></a>全局方法<code>parseInt(&#39;1&#39;,10)</code></h4><p><code>10</code>代表是看做十进制转换<br>但是<code>parseInt(&#39;011&#39;)  //11</code><br>因为后面的参数没写，所以当成10进制。<br>用它转非数字<code>parseInt(&#39;s&#39;) //NaN</code><br>数字非数字混合 <code>parseInt(&#39;1s&#39;) //1</code><br>所以得到他的规则：从头开始解析能解析的，一旦遇到不能解析的，就返回。</p>
<h4 id="有浮点数的话parseFloat-39-1-23-39"><a href="#有浮点数的话parseFloat-39-1-23-39" class="headerlink" title="有浮点数的话parseFloat(&#39;1.23&#39;)"></a>有浮点数的话<code>parseFloat(&#39;1.23&#39;)</code></h4><p><code>parse</code>是解析</p>
<h4 id="39-1-39-0骚方法（最常用）"><a href="#39-1-39-0骚方法（最常用）" class="headerlink" title="&#39;1&#39;-0骚方法（最常用）"></a><code>&#39;1&#39;-0</code>骚方法（最常用）</h4><p>任何一个东西-0就会得到一个<code>number</code></p>
<h4 id="取正-39-1-39-更骚的方法"><a href="#取正-39-1-39-更骚的方法" class="headerlink" title="取正+ &#39;1&#39;更骚的方法"></a>取正<code>+ &#39;1&#39;</code>更骚的方法</h4><p>负数也可以取正？<code>+ &#39;-1&#39;</code>这个是可以的，结果还是<code>-1</code>。</p>
<h3 id="iv-转object"><a href="#iv-转object" class="headerlink" title="iv.转object"></a>iv.转object</h3>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/10/JavaScript-数据/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张博涵">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Protoss Oracle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/10/JavaScript-数据/" itemprop="url">JavaScript-数据</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-10T12:17:16+08:00">2018-04-10</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-数据类型"><a href="#1-数据类型" class="headerlink" title="1.数据类型"></a>1.数据类型</h1><h3 id="种类-amp-备注"><a href="#种类-amp-备注" class="headerlink" title="种类&amp;备注"></a>种类&amp;备注</h3><p>七种数据类型：</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">number<span class="comment">;</span></span><br><span class="line">string<span class="comment">;</span></span><br><span class="line">boolean<span class="comment">;</span></span><br><span class="line">symbol<span class="comment">;</span></span><br><span class="line">undefined<span class="comment">;</span></span><br><span class="line">null<span class="comment">;</span></span><br><span class="line">object</span><br></pre></td></tr></table></figure>
<p>没有array类也没有function类，因为他们都算object。<br><strong>永远不要说JS里一切都是对象</strong></p>
<h2 id="I-number"><a href="#I-number" class="headerlink" title="I.number"></a>I.number</h2><h3 id="i-整数和小数"><a href="#i-整数和小数" class="headerlink" title="i.整数和小数"></a>i.整数和小数</h3><p><code>1</code>是一个整数<br>如何得到<code>1.1</code>这个数呢?<br>可以用<code>0.1</code>也可以用<code>.1</code></p>
<h3 id="ii-科学计数法"><a href="#ii-科学计数法" class="headerlink" title="ii.科学计数法"></a>ii.科学计数法</h3><p><code>1.23e2</code>是合理的可识别的<code>123</code></p>
<h3 id="iii-二进制"><a href="#iii-二进制" class="headerlink" title="iii.二进制"></a>iii.二进制</h3><p>开头是<code>0b</code>的</p>
<h3 id="iv-八进制"><a href="#iv-八进制" class="headerlink" title="iv.八进制"></a>iv.八进制</h3><p>开头是<code>0</code>的，后来ES5添加了0o11语法</p>
<h3 id="v-十六进制"><a href="#v-十六进制" class="headerlink" title="v.十六进制"></a>v.十六进制</h3><p>开头是<code>0x</code>的</p>
<h2 id="II-string"><a href="#II-string" class="headerlink" title="II.string"></a>II.string</h2><h3 id="i-空字符串"><a href="#i-空字符串" class="headerlink" title="i.空字符串"></a>i.空字符串</h3><p><code>&#39;&#39;</code>或者<code>&quot;&quot;</code>空字符串，里面什么都没有</p>
<h3 id="ii-转义符"><a href="#ii-转义符" class="headerlink" title="ii.转义符"></a>ii.转义符</h3><p>表达这个字符串里面只有一个<code>&#39;</code>怎么办<br><code>&quot;&#39;&quot;</code>这么来<br>那么问题来了，我要表达这个字符串是<code>&quot;&#39;</code>怎么办，一个单引号一个双引号区分不开呀<br>这时候需要一个<code>\</code>反杠，<code>\</code>来告诉浏览器，这个引号不是拿来结束字符串的。<br>这就叫做，<strong>转义符</strong><br>他不仅仅有这个作用还有：</p>
<table>
<thead>
<tr>
<th style="text-align:center">转义符</th>
<th style="text-align:center">作用</th>
<th style="text-align:center">Unicode</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>\0</code></td>
<td style="text-align:center">null</td>
<td style="text-align:center">（\u0000）</td>
</tr>
<tr>
<td style="text-align:center"><code>\b</code></td>
<td style="text-align:center">后退键</td>
<td style="text-align:center">（\u0008）</td>
</tr>
<tr>
<td style="text-align:center"><code>\f</code></td>
<td style="text-align:center">换页符</td>
<td style="text-align:center">（\u000C）</td>
</tr>
<tr>
<td style="text-align:center"><code>\n</code></td>
<td style="text-align:center">换行符</td>
<td style="text-align:center">（\u000A）</td>
</tr>
<tr>
<td style="text-align:center"><code>\r</code></td>
<td style="text-align:center">回车键</td>
<td style="text-align:center">（\u000D）</td>
</tr>
<tr>
<td style="text-align:center"><code>\t</code></td>
<td style="text-align:center">制表符</td>
<td style="text-align:center">（\u0009）</td>
</tr>
<tr>
<td style="text-align:center"><code>\v</code></td>
<td style="text-align:center">垂直制表符</td>
<td style="text-align:center">（\u000B）</td>
</tr>
<tr>
<td style="text-align:center"><code>\&#39;</code></td>
<td style="text-align:center">单引号</td>
<td style="text-align:center">（\u0027）</td>
</tr>
<tr>
<td style="text-align:center"><code>\&quot;</code></td>
<td style="text-align:center">双引号</td>
<td style="text-align:center">（\u0022）</td>
</tr>
<tr>
<td style="text-align:center"><code>\\</code></td>
<td style="text-align:center">反斜杠</td>
<td style="text-align:center">（\u005C）</td>
</tr>
</tbody>
</table>
<h3 id="iii-多行字符串"><a href="#iii-多行字符串" class="headerlink" title="iii.多行字符串"></a>iii.多行字符串</h3><p>不是字符串里面有回车<br>而是我希望字符串有换行</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var s = '<span class="number">1234</span>5 \</span><br><span class="line">        <span class="number">6789</span>0'</span><br></pre></td></tr></table></figure>
<p>就像命令行一样</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var s2 = '<span class="number">1234</span>5' + '<span class="number">6789</span>0'</span><br></pre></td></tr></table></figure>
<p>这样也可以<br><strong>但是方法一有个很鬼的问题</strong></p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var s = '<span class="number">1234</span>5 \     //反杠后面如果有一堆空格</span><br><span class="line"><span class="number">6789</span>0'</span><br></pre></td></tr></table></figure>
<p>反杠后面有一堆空格那么就热闹了，反杠会把第一个空格变成…字符串里的空格…<br>遭重了，很坑很坑。<br>所以最好用第二个方法了。</p>
<p><strong>既然这个这么坑，那JS要解决它呀</strong><br>所以在ES6里就有了这个符号`就是这个点</p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var s4 = `<span class="number">12345</span></span><br><span class="line"><span class="number">67890</span>`</span><br></pre></td></tr></table></figure>
<p>他会记录里面的一切，包括回车<br>所以这就是11个字符<code>s4.length</code>是<code>11</code></p>
<h2 id="III-boolean"><a href="#III-boolean" class="headerlink" title="III.boolean"></a>III.boolean</h2><h3 id="i-George-Boole"><a href="#i-George-Boole" class="headerlink" title="i.George Boole"></a>i.George Boole</h3><p>数学家、哲学家，发明逻辑学。<br>为了纪念他，我们把<code>ture</code>和<code>false</code>两个值叫做布尔<br><code>&amp;&amp;</code>与<br><code>||</code>或</p>
<h2 id="IV-symbol"><a href="#IV-symbol" class="headerlink" title="IV.symbol"></a>IV.symbol</h2><h3 id="i-是什么"><a href="#i-是什么" class="headerlink" title="i.是什么"></a>i.是什么</h3><p>ES6引入了新的数据类型Symbol，用于生成一个全局唯一的值。</p>
<h3 id="ii-怎么用"><a href="#ii-怎么用" class="headerlink" title="ii.怎么用"></a>ii.怎么用</h3><p>借用方方老师的例子<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> race = &#123;</span><br><span class="line">  protoss: <span class="symbol">'protos</span>s', <span class="comment">// 神族</span></span><br><span class="line">  terran: <span class="symbol">'terra</span>n', <span class="comment">// 人族</span></span><br><span class="line">  zerg: <span class="symbol">'zer</span>g' <span class="comment">// 虫族</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function createRole(<span class="class"><span class="keyword">type</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="class"><span class="keyword">type</span> <span class="title">===</span> <span class="title">race</span>.<span class="title">protoss</span>)</span>&#123;选择神族兵种&#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(<span class="class"><span class="keyword">type</span> <span class="title">===</span> <span class="title">race</span>.<span class="title">terran</span>)</span>&#123;选择人族兵种&#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(<span class="class"><span class="keyword">type</span> <span class="title">===</span> <span class="title">race</span>.<span class="title">zerg</span>)</span>&#123;选择虫族兵种&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>打星际选择兵种。race的键-值组合中，值显得并不重要。<br>那么值甚至可以乱敲只要他们三个种族的值不重复就可以。<br>那么Symbol可以替代对应的值</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> race = &#123;</span><br><span class="line">  protoss: Symbol(),</span><br><span class="line">  terran: Symbol(),</span><br><span class="line">  zerg: Symbol()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">race<span class="selector-class">.protoss</span> !== race<span class="selector-class">.terran</span> <span class="comment">// true</span></span><br><span class="line">race<span class="selector-class">.protoss</span> !== race<span class="selector-class">.zerg</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>还可以给<code>Symbol()</code>加个注释<code>Symbol(&#39;protoss&#39;)</code>仅仅就是个提示，起什么和值没有任何关系。</p>
<p>总结：占位置的。起名字福音。</p>
<h2 id="V-undefined和null"><a href="#V-undefined和null" class="headerlink" title="V.undefined和null"></a>V.undefined和null</h2><h3 id="i-null"><a href="#i-null" class="headerlink" title="i.null"></a>i.null</h3><p>是一个类型。只有一个值<code>null</code></p>
<h3 id="ii-undefined"><a href="#ii-undefined" class="headerlink" title="ii.undefined"></a>ii.undefined</h3><p>是一个类型。只有一个值<code>undefined</code></p>
<h3 id="iii-这两个兄弟干嘛的"><a href="#iii-这两个兄弟干嘛的" class="headerlink" title="iii.这两个兄弟干嘛的"></a>iii.这两个兄弟干嘛的</h3><p>这是个BUG，语言问题。<br>都表达了一个：<code>什么也没有</code>原创BUG哟</p>
<h3 id="iv-那他们有什么区别呢？？？"><a href="#iv-那他们有什么区别呢？？？" class="headerlink" title="iv.那他们有什么区别呢？？？"></a>iv.那他们有什么区别呢？？？</h3><p>① 变量没有值 - undefined<br>② 如果你想有一个对象（<code>obj</code>），但是目前不想赋值，那就给他一个<code>null</code>（推荐）.<code>var obj = null</code><br>如果你有一个非对象，目前不想赋值，那就给他一个<code>undefined</code>（推荐）。<code>var n</code>那它就是一个<code>undefine</code><br>③ <strong>②为惯例 ①为语法</strong><br>总结一下，null是空对象，undefined是非对象。</p>
<h2 id="VI-object"><a href="#VI-object" class="headerlink" title="VI.object"></a>VI.object</h2><p>之前说的，都是基本（简单）类型，到了对象，就是复杂类型了。<br>复杂类型由简单类型组成。<br>举个例子：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> name = <span class="string">'Oracle'</span></span><br><span class="line"><span class="selector-tag">var</span> age = <span class="string">'24'</span></span><br><span class="line"><span class="selector-tag">var</span> gender = <span class="string">'male'</span></span><br></pre></td></tr></table></figure>
<p>他们三个都是一对一，冥冥之中似乎可以放在一起。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> person = </span><br><span class="line">&#123;</span><br><span class="line"><span class="string">'name'</span>:<span class="string">'Oracle'</span>,</span><br><span class="line"><span class="string">'age'</span>:<span class="string">'24'</span>,</span><br><span class="line"><span class="string">'gender'</span>:<span class="string">'male'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>变成这种<code>键-值</code>组合</p>
<h3 id="i-语法"><a href="#i-语法" class="headerlink" title="i.语法"></a>i.语法</h3><p><code>{</code>开头<br><code>}</code>结尾<br>左边的键，可以不用引号，左边永远都是字符串。<br>右边该怎么写怎么写<br>需要变量去容纳它<code>var person =</code>，他就是一个类型是对象的变量<br>读取它<code>person[&#39;name&#39;]</code>这个<code>name</code>必须加引号<br>为了避免之前有变量也叫name<br>如果他符合标识符规则那可以<code>person.name</code></p>
<h3 id="ii-对象里还可以套对象"><a href="#ii-对象里还可以套对象" class="headerlink" title="ii.对象里还可以套对象"></a>ii.对象里还可以套对象</h3><p><strong>那么对象里套的对象，里面的对象是否可以是自己？</strong><br>这个麻烦了<br><strong>解决这个问题之前请参见(<a href="https://574549756.github.io/2018/04/11/JavaScript-%E7%B1%BB%E5%9E%8B/" target="_blank" rel="noopener">JavaScript-类型</a>)</strong></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">a</span> = &#123;&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.self</span> = a</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.self</span><span class="selector-class">.self</span><span class="selector-class">.self</span>是什么</span><br></pre></td></tr></table></figure>
<p>首先对象存了一个ADDR然后不断引用这个地址</p>
<h3 id="iii-空字符串是否能当做key？"><a href="#iii-空字符串是否能当做key？" class="headerlink" title="iii.空字符串是否能当做key？"></a>iii.空字符串是否能当做key？</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">person = &#123;'':'oracle'&#125;</span><br><span class="line">person['']   <span class="comment">//oracle</span></span><br></pre></td></tr></table></figure>
<p>可以</p>
<h3 id="iv-key的第一个字是否可以是数字"><a href="#iv-key的第一个字是否可以是数字" class="headerlink" title="iv.key的第一个字是否可以是数字"></a>iv.key的第一个字是否可以是数字</h3><p>不可以。<br><code>9name: &#39;oracle&#39;,</code> 这种是不可以<br>如果不加引号，key必须依照标识符（变量名）原则<br>不加引号，写起来舒服。加上引号，功能多。<br>同理，如果是<strong>数组</strong>那么读取数组成员的时候就<strong>不能用点结构</strong><br>单独的数值不能作为标识符。数组成员只能用方括号<code>arr[0]</code>来表示</p>
<h3 id="v-key能不能有空格"><a href="#v-key能不能有空格" class="headerlink" title="v.key能不能有空格"></a>v.key能不能有空格</h3><p>一样的规则，有引号就可以，没有就GG</p>
<h3 id="vi-key可不可以加中文"><a href="#vi-key可不可以加中文" class="headerlink" title="vi.key可不可以加中文"></a>vi.key可不可以加中文</h3><p>可以，因为中文可以当做变量名。</p>
<h3 id="vii-for-in"><a href="#vii-for-in" class="headerlink" title="vii.for in"></a>vii.for in</h3><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="built_in">var</span> <span class="built_in">key</span> <span class="keyword">in</span> person)&#123;</span><br><span class="line">        console.<span class="built_in">log</span>(<span class="built_in">key</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>遍历数组的<code>key</code>但是<br>出现<code>key</code>的顺序是看天的。<br>那我想打出值呢？</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="built_in">var</span> <span class="built_in">key</span> <span class="keyword">in</span> person)&#123;</span><br><span class="line">        console.<span class="built_in">log</span>(person[<span class="built_in">key</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>那一起打呢？</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="built_in">var</span> <span class="built_in">key</span> <span class="keyword">in</span> person)&#123;</span><br><span class="line">        console.<span class="built_in">log</span>(<span class="built_in">key</span>,person[<span class="built_in">key</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>和上面说的一样，随机的</p>
<h2 id="VII-typeof"><a href="#VII-typeof" class="headerlink" title="VII.typeof"></a>VII.typeof</h2><h3 id="i-干吗用的？"><a href="#i-干吗用的？" class="headerlink" title="i.干吗用的？"></a>i.干吗用的？</h3><p>看类型的</p>
<figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">var</span> <span class="built_in">t</span> = <span class="number">1</span></span><br><span class="line">typeof <span class="built_in">t</span> //<span class="string">"number"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">var</span> <span class="built_in">t</span> = <span class="built_in">true</span></span><br><span class="line">typeof <span class="built_in">t</span> //<span class="string">"boolean"</span></span><br></pre></td></tr></table></figure>
<h3 id="ii-但是有一个特殊"><a href="#ii-但是有一个特殊" class="headerlink" title="ii.但是有一个特殊"></a>ii.但是有一个特殊</h3><p><strong>这是JS的BUG</strong><br>他叫做<code>null</code><br>如果测<code>typeof null</code>会返回<code>‘object’</code><br>如果声明一个<code>函数</code><br>用<code>typeof fn</code>本应该是<code>‘object’</code>但是他会返回<code>‘function’</code><br>什么时候函数也是独立的类型了？</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/05/canvas画板/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张博涵">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Protoss Oracle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/05/canvas画板/" itemprop="url">canvas画板</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-05T11:35:09+08:00">2018-04-05</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-尝试用div画画"><a href="#1-尝试用div画画" class="headerlink" title="1.尝试用div画画"></a>1.尝试用div画画</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 按下去鼠标</span></span><br><span class="line">    doucment.onmousedown = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(x)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//动鼠标</span></span><br><span class="line">	<span class="built_in">document</span>.onmousemove = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    	<span class="built_in">console</span>.log(y)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//松开鼠标</span></span><br><span class="line">	<span class="built_in">document</span>.onmouseup = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    	<span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="最好单独用div"><a href="#最好单独用div" class="headerlink" title="最好单独用div"></a>最好单独用div</h3><pre><code>`&lt;div id=&quot;canvas&quot;&gt;&lt;/div&gt;`
</code></pre><h3 id="那么上面代码优化为"><a href="#那么上面代码优化为" class="headerlink" title="那么上面代码优化为"></a>那么上面代码优化为</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">div</span> = document.getElementById(<span class="string">'canvas'</span>)</span><br><span class="line"><span class="comment">//按下鼠标</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.onmousedown</span> = function(x)&#123;</span><br><span class="line">	<span class="selector-tag">var</span> x = <span class="selector-tag">a</span>.clientX</span><br><span class="line">    <span class="selector-tag">var</span> y = <span class="selector-tag">a</span>.clientY</span><br><span class="line">    <span class="selector-tag">var</span> divA = document.createElement(<span class="string">'div'</span>)</span><br><span class="line">    divA<span class="selector-class">.style</span> = <span class="string">"width: 6px; height: 6px;"</span>+<span class="string">"background:black; border-radius: 3px;"</span></span><br><span class="line">    <span class="selector-tag">div</span>.appendChild(divA)</span><br><span class="line">    <span class="string">"position: absolute; left: "</span>+(x-<span class="number">3</span>) +<span class="string">"px;"</span> + <span class="string">"top: "</span>+(y-<span class="number">3</span>)+<span class="string">"px;"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//动鼠标</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.onmousemove</span> = function(y)&#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//松开鼠标</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.onmouseup</span> = function(z)&#123;</span><br><span class="line">	console.log(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="小技巧（Flag）"><a href="#小技巧（Flag）" class="headerlink" title="小技巧（Flag）"></a>小技巧（Flag）</h3><p>通过一个变量<code>var painting = false</code><br>全局变量的时候默认为false<br>在按下去鼠标的时候<code>painting = true</code><br>移动鼠标div将其作为判断条件，如果 <code>if(painting){}</code>如果painting存在则继续<br>在松开鼠标的时候改变变量painting为false</p>
<h2 id="2-然而做了这么多，他画画还是断断续续的，所以告诉我们画画不能用div，要用canvas"><a href="#2-然而做了这么多，他画画还是断断续续的，所以告诉我们画画不能用div，要用canvas" class="headerlink" title="2.然而做了这么多，他画画还是断断续续的，所以告诉我们画画不能用div，要用canvas"></a><strong>2.然而做了这么多，他画画还是断断续续的，所以告诉我们画画不能用div，要用canvas</strong></h2><h3 id="canvas不能用CSS控制宽高"><a href="#canvas不能用CSS控制宽高" class="headerlink" title="canvas不能用CSS控制宽高"></a>canvas不能用CSS控制宽高</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">context</span>.strokesStyle描边</span><br><span class="line"><span class="built_in">context</span>.strokeRect(xx,yy,xxx,yyy)初始坐标，结束坐标</span><br><span class="line"><span class="built_in">context</span>.fillStyle = <span class="string">'颜色'</span><span class="comment">;填充</span></span><br><span class="line"><span class="built_in">context</span>.fillStyle(xx,yy,xxx,yyy)初始坐标，结束坐标</span><br><span class="line"></span><br><span class="line"><span class="built_in">context</span>.clearRect(xx,yy,xxx,yyy)初始坐标，宽度，高度（清除）</span><br></pre></td></tr></table></figure>
<h3 id="圆弧"><a href="#圆弧" class="headerlink" title="圆弧"></a>圆弧</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">context</span><span class="selector-class">.arc</span>(x,y,半径,起始角度,结束角度,顺时针或者逆时针(默认顺时针，anticlockwise逆时针));</span><br><span class="line"><span class="comment">//注意这里的结束角度不是度数，而是用元周率度量的所以要用Math.PI就是180度Math.PI/2就是90度</span></span><br></pre></td></tr></table></figure>
<p>除了矩形都要context.beginPath()一下</p>
<p>canvas里面的坐标都是想对于canvas的而不是想对于视口的，所以要修正他。</p>
<h3 id="如何创建补间"><a href="#如何创建补间" class="headerlink" title="如何创建补间"></a>如何创建补间</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="keyword">context</span> = xxx<span class="variable">.getContext</span>('<span class="number">2</span>d')</span><br><span class="line"><span class="keyword">context</span><span class="variable">.beginPath</span>();</span><br><span class="line"><span class="keyword">context</span><span class="variable">.moveTo</span>(<span class="number">0</span>,<span class="number">0</span>) <span class="comment">//起点</span></span><br><span class="line"><span class="keyword">context</span><span class="variable">.lineWidth</span> = <span class="number">5</span>  <span class="comment">//宽度</span></span><br><span class="line"><span class="keyword">context</span><span class="variable">.lineTo</span>(<span class="number">200</span>,<span class="number">0</span>)  <span class="comment">//终点</span></span><br><span class="line"><span class="keyword">context</span><span class="variable">.stroke</span>()  <span class="comment">//</span></span><br><span class="line"><span class="keyword">context</span><span class="variable">.closePath</span>() <span class="comment">//闭合</span></span><br></pre></td></tr></table></figure>
<h3 id="获取用户视口的宽高的方法（这个是最简单的了）"><a href="#获取用户视口的宽高的方法（这个是最简单的了）" class="headerlink" title="获取用户视口的宽高的方法（这个是最简单的了）"></a>获取用户视口的宽高的方法（这个是最简单的了）</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">var</span> pageWidth = document<span class="selector-class">.documentElement</span><span class="selector-class">.clientWidth</span></span><br><span class="line"><span class="selector-tag">var</span> pageHeight = document<span class="selector-class">.documentElement</span><span class="selector-class">.clientHeight</span></span><br><span class="line">yyy<span class="selector-class">.width</span> = pageWidth</span><br><span class="line">yyy<span class="selector-class">.height</span> = pageHeight</span><br><span class="line"><span class="comment">//获取用户视口尺寸</span></span><br></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">window<span class="selector-class">.onresize</span> = funtion()&#123;</span><br><span class="line">  <span class="selector-tag">var</span> pageWidth = document<span class="selector-class">.documentElement</span><span class="selector-class">.clientWidth</span></span><br><span class="line">  <span class="selector-tag">var</span> pageHeight = document<span class="selector-class">.documentElement</span><span class="selector-class">.clientHeight</span></span><br><span class="line">  yyy<span class="selector-class">.width</span> = pageWidth</span><br><span class="line">  yyy<span class="selector-class">.height</span> = pageHeight</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//改变宽高时，同步宽高。</span></span><br><span class="line"><span class="comment">//resize事件来改变宽高</span></span><br></pre></td></tr></table></figure>
<h2 id="3-如何让移动端也用上呢？"><a href="#3-如何让移动端也用上呢？" class="headerlink" title="3.如何让移动端也用上呢？"></a>3.如何让移动端也用上呢？</h2><h3 id="需要一个特性检测"><a href="#需要一个特性检测" class="headerlink" title="需要一个特性检测"></a>需要一个特性检测</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="built_in">document</span>.body.ontouchstart !== <span class="literal">undefined</span>)&#123;</span><br><span class="line">	<span class="comment">//如果存在说明他是触屏设备</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	如果不存在，那么说明不是触屏设备，监听鼠标操作是正确的。</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="触屏是支持多点触控的"><a href="#触屏是支持多点触控的" class="headerlink" title="触屏是支持多点触控的"></a>触屏是支持多点触控的</h3><p>所以touch时间需要把用户滑动的手指都用数组储存起来<br>放在touches里面，所以找坐标的工作要交给<code>var x = aaa.touchs[0].clientX</code>以及<code>var y = aaa.touch[0].clientY</code> </p>
<h2 id="4-补充点功能"><a href="#4-补充点功能" class="headerlink" title="4.补充点功能"></a>4.补充点功能</h2><h3 id="改变画笔颜色"><a href="#改变画笔颜色" class="headerlink" title="改变画笔颜色"></a>改变画笔颜色</h3><h4 id="I-首先让图标变好看点"><a href="#I-首先让图标变好看点" class="headerlink" title="I.首先让图标变好看点"></a>I.首先让图标变好看点</h4><p>我们需要<code>iconfont.cn</code>搞点图标玩玩<br>把搞到的图标代替button按钮<br>设置id便于选择器选择。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">id</span>=<span class="string">"pen"</span> <span class="attr">class</span>=<span class="string">"icon"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">"#icon-pencil"</span>&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">id</span>=<span class="string">"eraser"</span> <span class="attr">class</span>=<span class="string">"icon"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">"#icon-eraser"</span>&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>CSS<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.actions</span>&#123;</span><br><span class="line">	<span class="attribute">position</span>: fixed;</span><br><span class="line">	<span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.actions</span> <span class="selector-tag">svg</span><span class="selector-class">.active</span>&#123;</span><br><span class="line">	<span class="attribute">fill</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>那么在js中调用active状态，通过<code>classList.remove(&#39;&#39;)</code>和<code>classList.add(&#39;&#39;)</code>来添加和移除相应class<br><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var eraserEnabled = <span class="literal">false</span></span><br><span class="line">pen.onclick = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">	eraserEnabled = <span class="literal">false</span>;</span><br><span class="line">	pen.classList.add(<span class="string">"active"</span>)</span><br><span class="line">	eraser.classList.<span class="built_in">remove</span>(<span class="string">"active"</span>)</span><br><span class="line">&#125;</span><br><span class="line">eraser.onclick = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">	eraserEnabled = <span class="literal">true</span></span><br><span class="line">	eraser.classList.add(<span class="string">"active"</span>)</span><br><span class="line">	pen.classList.<span class="built_in">remove</span>(<span class="string">"active"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/02/入门-JavaScript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张博涵">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Protoss Oracle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/02/入门-JavaScript/" itemprop="url">入门-JavaScript</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-02T22:50:06+08:00">2018-04-02</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Uncaught SyntextError: Unexpected tokken ]<br>没有被处理的语法错误： 不可预知的字符串 ]<br>which means：浏览器觉得这里不应该有一个中括号。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mainXXX.onkeypress = <span class="function"><span class="keyword">function</span>(<span class="params">random</span>)</span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">'我发现你输入了一个键'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>localStorage</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">localStorage.setItem(<span class="string">'uuu'</span>, <span class="built_in">JSON</span>.stringify(hash))<span class="comment">//每次变化就存下来</span></span><br></pre></td></tr></table></figure>
<p>存在浏览器的storage里面<br><code>var hashInLocalStorage = JSON.parse(localStorage.getItem(&#39;uuu&#39;) || &#39;&#39;)</code><br>取出localStorage中uuu对应的hash</p>
<p>inline元素中间有回车本应该有个空隙<br>JavaScript生成的inline元素是没有空隙的<br>就会紧紧贴在一起</p>
<p>vh是指的视口高度（屏幕大小）<code>viewport height</code><br>盖住当前元素（做到自适应）<code>background-size: cover;</code></p>
<p>网站根目录<code>/favicon.ico</code><br>访问网站的<code>logo</code></p>
<p><code>元素名.previousSibling</code><br>获取元素名上一个元素</p>
<p><code>.onerror</code><br>发生错误以后执行</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/29/入门-算法初级/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张博涵">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Protoss Oracle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/29/入门-算法初级/" itemprop="url">入门-算法初级</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-29T09:13:50+08:00">2018-03-29</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>a &lt;- 1<br>&lt;-是赋值的意思。<br>visualgo.net<br>哈希<br>只要它是<br>‘键’： ‘值’的模式，都叫哈希。</p>
<p>比较排序的复杂程度NlogN</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">张博涵</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">18</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">7</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate"> 
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">张博涵</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Muse</a> v6.0.6</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.6"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.6"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.6"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

</body>
</html>
